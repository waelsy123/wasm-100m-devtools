{"version":3,"file":"tool_highlight.js","sourceRoot":"","sources":["../../../../inspector_overlay/tool_highlight.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n//  Copyright (C) 2012 Google Inc. All rights reserved.\n\n//  Redistribution and use in source and binary forms, with or without\n//  modification, are permitted provided that the following conditions\n//  are met:\n\n//  1.  Redistributions of source code must retain the above copyright\n//      notice, this list of conditions and the following disclaimer.\n//  2.  Redistributions in binary form must reproduce the above copyright\n//      notice, this list of conditions and the following disclaimer in the\n//      documentation and/or other materials provided with the distribution.\n//  3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n//      its contributors may be used to endorse or promote products derived\n//      from this software without specific prior written permission.\n\n//  THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n//  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n//  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n//  DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n//  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n//  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n//  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n//  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n//  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n//  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {contrastRatio, contrastRatioAPCA, getAPCAThreshold, getContrastThreshold} from '../front_end/core/common/ColorUtils.js';  // eslint-disable-line rulesdir/es_modules_import\n\nimport type {Bounds, PathCommands, ResetData} from './common.js';\nimport {constrainNumber, createChild, createElement, createTextChild, ellipsify, Overlay} from './common.js';\nimport type {PathBounds} from './highlight_common.js';\nimport {drawPath, emptyBounds, formatColor, formatRgba, parseHexa} from './highlight_common.js';\nimport type {FlexContainerHighlight, FlexItemHighlight} from './highlight_flex_common.js';\nimport {drawLayoutFlexContainerHighlight, drawLayoutFlexItemHighlight} from './highlight_flex_common.js';\nimport type {GridHighlight} from './highlight_grid_common.js';\nimport {drawLayoutGridHighlight} from './highlight_grid_common.js';\nimport type {ScrollSnapHighlight} from './highlight_scroll_snap.js';\nimport type {ContainerQueryHighlight} from './highlight_container_query.js';\nimport {drawContainerQueryHighlight} from './highlight_container_query.js';\nimport type {IsolatedElementHighlight} from './highlight_isolated_element.js';\nimport {PersistentOverlay} from './tool_persistent.js';\n\ninterface Path {\n  path: PathCommands;\n  outlineColor: string;\n  fillColor: string;\n  name: string;\n}\n\ninterface ContrastInfo {\n  backgroundColor: string;\n  fontSize: string;\n  fontWeight: string;\n  contrastAlgorithm: 'apca'|'aa'|'aaa';\n  textOpacity: number;\n}\n\ninterface ElementInfo {\n  contrast?: ContrastInfo;\n  tagName: string;\n  idValue: string;\n  className?: string;\n  nodeWidth: number;\n  nodeHeight: number;\n  isLocked: boolean;\n  isLockedAncestor: boolean;\n  style: {[key: string]: string|undefined};\n  showAccessibilityInfo: boolean;\n  isKeyboardFocusable: boolean;\n  accessibleName: string;\n  accessibleRole: string;\n  layoutObjectName?: string;\n}\n\ninterface Highlight {\n  paths: Path[];\n  showRulers: boolean;\n  showExtensionLines: boolean;\n  elementInfo: ElementInfo;\n  colorFormat: string;\n  gridInfo: GridHighlight[];\n  flexInfo: FlexContainerHighlight[];\n  flexItemInfo: FlexItemHighlight[];\n  containerQueryInfo: ContainerQueryHighlight[];\n  isolatedElementInfo: IsolatedElementHighlight[];\n}\n\nexport class HighlightOverlay extends Overlay {\n  private tooltip!: HTMLElement;\n  private persistentOverlay?: PersistentOverlay;\n  private gridLabelState = {gridLayerCounter: 0};\n\n  reset(resetData: ResetData) {\n    super.reset(resetData);\n    this.tooltip.innerHTML = '';\n    this.gridLabelState.gridLayerCounter = 0;\n    if (this.persistentOverlay) {\n      this.persistentOverlay.reset(resetData);\n    }\n  }\n\n  install() {\n    this.document.body.classList.add('fill');\n\n    const canvas = this.document.createElement('canvas');\n    canvas.id = 'canvas';\n    canvas.classList.add('fill');\n    this.document.body.append(canvas);\n\n    const tooltip = this.document.createElement('div');\n    tooltip.id = 'tooltip-container';\n    this.document.body.append(tooltip);\n    this.tooltip = tooltip;\n\n    this.persistentOverlay = new PersistentOverlay(this.window);\n    this.persistentOverlay.renderGridMarkup();\n    this.persistentOverlay.setCanvas(canvas);\n\n    this.setCanvas(canvas);\n\n    super.install();\n  }\n\n  uninstall() {\n    this.document.body.classList.remove('fill');\n    this.document.body.innerHTML = '';\n\n    super.uninstall();\n  }\n\n  drawHighlight(highlight: Highlight) {\n    this.context.save();\n\n    const bounds = emptyBounds();\n    let contentPath: PathCommands|null = null;\n    let borderPath: PathCommands|null = null;\n\n    for (let paths = highlight.paths.slice(); paths.length;) {\n      const path = paths.pop();\n      if (!path) {\n        continue;\n      }\n      this.context.save();\n      drawPath(\n          this.context, path.path, path.fillColor, path.outlineColor, undefined, bounds, this.emulationScaleFactor);\n      if (paths.length) {\n        this.context.globalCompositeOperation = 'destination-out';\n        drawPath(\n            this.context, paths[paths.length - 1].path, 'red', undefined, undefined, bounds, this.emulationScaleFactor);\n      }\n      this.context.restore();\n\n      if (path.name === 'content') {\n        contentPath = path.path;\n      }\n      if (path.name === 'border') {\n        borderPath = path.path;\n      }\n    }\n    this.context.restore();\n\n    this.context.save();\n\n    const rulerAtRight = Boolean(\n        highlight.paths.length && highlight.showRulers && bounds.minX < 20 && bounds.maxX + 20 < this.canvasWidth);\n    const rulerAtBottom = Boolean(\n        highlight.paths.length && highlight.showRulers && bounds.minY < 20 && bounds.maxY + 20 < this.canvasHeight);\n\n    if (highlight.showRulers) {\n      this.drawAxis(this.context, rulerAtRight, rulerAtBottom);\n    }\n\n    if (highlight.paths.length) {\n      if (highlight.showExtensionLines) {\n        drawRulers(\n            this.context, bounds, rulerAtRight, rulerAtBottom, undefined, false, this.canvasWidth, this.canvasHeight);\n      }\n\n      if (highlight.elementInfo) {\n        drawElementTitle(highlight.elementInfo, highlight.colorFormat, bounds, this.canvasWidth, this.canvasHeight);\n      }\n    }\n    if (highlight.gridInfo) {\n      for (const grid of highlight.gridInfo) {\n        drawLayoutGridHighlight(\n            grid, this.context, this.deviceScaleFactor, this.canvasWidth, this.canvasHeight, this.emulationScaleFactor,\n            this.gridLabelState);\n      }\n    }\n\n    if (highlight.flexInfo) {\n      for (const flex of highlight.flexInfo) {\n        drawLayoutFlexContainerHighlight(\n            flex, this.context, this.deviceScaleFactor, this.canvasWidth, this.canvasHeight, this.emulationScaleFactor);\n      }\n    }\n\n    if (highlight.containerQueryInfo) {\n      for (const containerQuery of highlight.containerQueryInfo) {\n        drawContainerQueryHighlight(containerQuery, this.context, this.emulationScaleFactor);\n      }\n    }\n\n    // Draw the highlight for flex item only if the element isn't also a flex container that already has some highlight\n    // config.\n    const isVisibleFlexContainer = highlight.flexInfo?.length && highlight.flexInfo.some(config => {\n      return Object.keys(config.flexContainerHighlightConfig).length > 0;\n    });\n\n    if (highlight.flexItemInfo && !isVisibleFlexContainer) {\n      for (const flexItem of highlight.flexItemInfo) {\n        const path = flexItem.boxSizing === 'content' ? contentPath : borderPath;\n        if (!path) {\n          continue;\n        }\n        drawLayoutFlexItemHighlight(\n            flexItem, path, this.context, this.deviceScaleFactor, this.canvasWidth, this.canvasHeight,\n            this.emulationScaleFactor);\n      }\n    }\n    this.context.restore();\n\n    return {bounds: bounds};\n  }\n\n  drawGridHighlight(highlight: GridHighlight) {\n    if (this.persistentOverlay) {\n      this.persistentOverlay.drawGridHighlight(highlight);\n    }\n  }\n\n  drawFlexContainerHighlight(highlight: FlexContainerHighlight) {\n    if (this.persistentOverlay) {\n      this.persistentOverlay.drawFlexContainerHighlight(highlight);\n    }\n  }\n\n  drawScrollSnapHighlight(highlight: ScrollSnapHighlight) {\n    this.persistentOverlay?.drawScrollSnapHighlight(highlight);\n  }\n\n  drawContainerQueryHighlight(highlight: ContainerQueryHighlight) {\n    this.persistentOverlay?.drawContainerQueryHighlight(highlight);\n  }\n\n  drawIsolatedElementHighlight(highlight: IsolatedElementHighlight) {\n    this.persistentOverlay?.drawIsolatedElementHighlight(highlight);\n  }\n\n  private drawAxis(context: CanvasRenderingContext2D, rulerAtRight: boolean, rulerAtBottom: boolean) {\n    context.save();\n\n    const pageFactor = this.pageZoomFactor * this.pageScaleFactor * this.emulationScaleFactor;\n    const scrollX = this.scrollX * this.pageScaleFactor;\n    const scrollY = this.scrollY * this.pageScaleFactor;\n    function zoom(x: number) {\n      return Math.round(x * pageFactor);\n    }\n    function unzoom(x: number) {\n      return Math.round(x / pageFactor);\n    }\n\n    const width = this.canvasWidth / pageFactor;\n    const height = this.canvasHeight / pageFactor;\n\n    const gridSubStep = 5;\n    const gridStep = 50;\n\n    {\n      // Draw X grid background\n      context.save();\n      context.fillStyle = gridBackgroundColor;\n      if (rulerAtBottom) {\n        context.fillRect(0, zoom(height) - 15, zoom(width), zoom(height));\n      } else {\n        context.fillRect(0, 0, zoom(width), 15);\n      }\n\n      // Clip out backgrounds intersection\n      context.globalCompositeOperation = 'destination-out';\n      context.fillStyle = 'red';\n      if (rulerAtRight) {\n        context.fillRect(zoom(width) - 15, 0, zoom(width), zoom(height));\n      } else {\n        context.fillRect(0, 0, 15, zoom(height));\n      }\n      context.restore();\n\n      // Draw Y grid background\n      context.fillStyle = gridBackgroundColor;\n      if (rulerAtRight) {\n        context.fillRect(zoom(width) - 15, 0, zoom(width), zoom(height));\n      } else {\n        context.fillRect(0, 0, 15, zoom(height));\n      }\n    }\n\n    context.lineWidth = 1;\n    context.strokeStyle = darkGridColor;\n    context.fillStyle = darkGridColor;\n    {\n      // Draw labels.\n      context.save();\n      context.translate(-scrollX, 0.5 - scrollY);\n      const maxY = height + unzoom(scrollY);\n      for (let y = 2 * gridStep; y < maxY; y += 2 * gridStep) {\n        context.save();\n        context.translate(scrollX, zoom(y));\n        context.rotate(-Math.PI / 2);\n        context.fillText(String(y), 2, rulerAtRight ? zoom(width) - 7 : 13);\n        context.restore();\n      }\n      context.translate(0.5, -0.5);\n      const maxX = width + unzoom(scrollX);\n      for (let x = 2 * gridStep; x < maxX; x += 2 * gridStep) {\n        context.save();\n        context.fillText(String(x), zoom(x) + 2, rulerAtBottom ? scrollY + zoom(height) - 7 : scrollY + 13);\n        context.restore();\n      }\n      context.restore();\n    }\n\n    {\n      // Draw vertical grid\n      context.save();\n      if (rulerAtRight) {\n        context.translate(zoom(width), 0);\n        context.scale(-1, 1);\n      }\n      context.translate(-scrollX, 0.5 - scrollY);\n      const maxY = height + unzoom(scrollY);\n      for (let y = gridStep; y < maxY; y += gridStep) {\n        context.beginPath();\n        context.moveTo(scrollX, zoom(y));\n        const markLength = (y % (gridStep * 2)) ? 5 : 8;\n        context.lineTo(scrollX + markLength, zoom(y));\n        context.stroke();\n      }\n      context.strokeStyle = lightGridColor;\n      for (let y = gridSubStep; y < maxY; y += gridSubStep) {\n        if (!(y % gridStep)) {\n          continue;\n        }\n        context.beginPath();\n        context.moveTo(scrollX, zoom(y));\n        context.lineTo(scrollX + gridSubStep, zoom(y));\n        context.stroke();\n      }\n      context.restore();\n    }\n\n    {\n      // Draw horizontal grid\n      context.save();\n      if (rulerAtBottom) {\n        context.translate(0, zoom(height));\n        context.scale(1, -1);\n      }\n      context.translate(0.5 - scrollX, -scrollY);\n      const maxX = width + unzoom(scrollX);\n      for (let x = gridStep; x < maxX; x += gridStep) {\n        context.beginPath();\n        context.moveTo(zoom(x), scrollY);\n        const markLength = (x % (gridStep * 2)) ? 5 : 8;\n        context.lineTo(zoom(x), scrollY + markLength);\n        context.stroke();\n      }\n      context.strokeStyle = lightGridColor;\n      for (let x = gridSubStep; x < maxX; x += gridSubStep) {\n        if (!(x % gridStep)) {\n          continue;\n        }\n        context.beginPath();\n        context.moveTo(zoom(x), scrollY);\n        context.lineTo(zoom(x), scrollY + gridSubStep);\n        context.stroke();\n      }\n      context.restore();\n    }\n\n    context.restore();\n  }\n}\n\nconst lightGridColor = 'rgba(0,0,0,0.2)';\nconst darkGridColor = 'rgba(0,0,0,0.7)';\nconst gridBackgroundColor = 'rgba(255, 255, 255, 0.8)';\n\n/**\n * Determine the layout type of the highlighted element based on the config.\n * @param {Object} elementInfo The element information, part of the config object passed to drawHighlight\n * @return {String|null} The layout type of the object, or null if none was found\n */\nfunction getElementLayoutType(elementInfo: ElementInfo): string|null {\n  if (elementInfo.layoutObjectName && elementInfo.layoutObjectName.endsWith('Grid')) {\n    return 'grid';\n  }\n\n  if (elementInfo.layoutObjectName && elementInfo.layoutObjectName === 'LayoutNGFlexibleBox') {\n    return 'flex';\n  }\n\n  return null;\n}\n\n/**\n * Create the DOM node that displays the description of the highlighted element\n */\nfunction createElementDescription(elementInfo: ElementInfo, colorFormat: string): Element {\n  const elementInfoElement = createElement('div', 'element-info');\n  const elementInfoHeaderElement = createChild(elementInfoElement, 'div', 'element-info-header');\n\n  const layoutType = getElementLayoutType(elementInfo);\n  if (layoutType) {\n    createChild(elementInfoHeaderElement, 'div', `element-layout-type ${layoutType}`);\n  }\n  const descriptionElement = createChild(elementInfoHeaderElement, 'div', 'element-description monospace');\n  const tagNameElement = createChild(descriptionElement, 'span', 'material-tag-name');\n  tagNameElement.textContent = elementInfo.tagName;\n  const nodeIdElement = createChild(descriptionElement, 'span', 'material-node-id');\n  const maxLength = 80;\n  nodeIdElement.textContent = elementInfo.idValue ? '#' + ellipsify(elementInfo.idValue, maxLength) : '';\n  nodeIdElement.classList.toggle('hidden', !elementInfo.idValue);\n\n  const classNameElement = createChild(descriptionElement, 'span', 'material-class-name');\n  if (nodeIdElement.textContent.length < maxLength) {\n    classNameElement.textContent = ellipsify(elementInfo.className || '', maxLength - nodeIdElement.textContent.length);\n  }\n  classNameElement.classList.toggle('hidden', !elementInfo.className);\n  const dimensionsElement = createChild(elementInfoHeaderElement, 'div', 'dimensions');\n  createChild(dimensionsElement, 'span', 'material-node-width').textContent =\n      String(Math.round(elementInfo.nodeWidth * 100) / 100);\n  createTextChild(dimensionsElement, '\\u00d7');\n  createChild(dimensionsElement, 'span', 'material-node-height').textContent =\n      String(Math.round(elementInfo.nodeHeight * 100) / 100);\n\n  const style = elementInfo.style || {};\n  let elementInfoBodyElement: HTMLElement;\n\n  if (elementInfo.isLockedAncestor) {\n    addTextRow('Showing content-visibility ancestor', '');\n  }\n\n  if (elementInfo.isLocked) {\n    addTextRow('Descendants are skipped due to content-visibility', '');\n  }\n\n  const color = style['color'];\n  if (color && color !== '#00000000') {\n    addColorRow('Color', color, colorFormat);\n  }\n\n  const fontFamily = style['font-family'];\n  const fontSize = style['font-size'];\n  if (fontFamily && fontSize !== '0px') {\n    addTextRow('Font', `${fontSize} ${fontFamily}`);\n  }\n\n  const bgcolor = style['background-color'];\n  if (bgcolor && bgcolor !== '#00000000') {\n    addColorRow('Background', bgcolor, colorFormat);\n  }\n\n  const margin = style['margin'];\n  if (margin && margin !== '0px') {\n    addTextRow('Margin', margin);\n  }\n\n  const padding = style['padding'];\n  if (padding && padding !== '0px') {\n    addTextRow('Padding', padding);\n  }\n\n  const cbgColor = elementInfo.contrast ? elementInfo.contrast.backgroundColor : null;\n  const hasContrastInfo = color && color !== '#00000000' && cbgColor && cbgColor !== '#00000000';\n\n  if (elementInfo.showAccessibilityInfo) {\n    addSection('Accessibility');\n\n    if (hasContrastInfo && style['color'] && elementInfo.contrast) {\n      addContrastRow(style['color'], elementInfo.contrast);\n    }\n\n    addTextRow('Name', elementInfo.accessibleName);\n    addTextRow('Role', elementInfo.accessibleRole);\n    addIconRow(\n        'Keyboard-focusable',\n        elementInfo.isKeyboardFocusable ? 'a11y-icon a11y-icon-ok' : 'a11y-icon a11y-icon-not-ok');\n  }\n\n  function ensureElementInfoBody() {\n    if (!elementInfoBodyElement) {\n      elementInfoBodyElement = createChild(elementInfoElement, 'div', 'element-info-body');\n    }\n  }\n\n  function addSection(name: string) {\n    ensureElementInfoBody();\n    const rowElement = createChild(elementInfoBodyElement, 'div', 'element-info-row element-info-section');\n    const nameElement = createChild(rowElement, 'div', 'section-name');\n    nameElement.textContent = name;\n    createChild(createChild(rowElement, 'div', 'separator-container'), 'div', 'separator');\n  }\n\n  function addRow(name: string, rowClassName: string|undefined, valueClassName: string|undefined) {\n    ensureElementInfoBody();\n    const rowElement = createChild(elementInfoBodyElement, 'div', 'element-info-row');\n    if (rowClassName) {\n      rowElement.classList.add(rowClassName);\n    }\n    const nameElement = createChild(rowElement, 'div', 'element-info-name');\n    nameElement.textContent = name;\n    createChild(rowElement, 'div', 'element-info-gap');\n    return createChild(rowElement, 'div', valueClassName || '');\n  }\n\n  function addIconRow(name: string, value: string) {\n    createChild(addRow(name, '', 'element-info-value-icon'), 'div', value);\n  }\n\n  function addTextRow(name: string, value: string) {\n    createTextChild(addRow(name, '', 'element-info-value-text'), value);\n  }\n\n  function addColorRow(name: string, color: string, colorFormat: string) {\n    const valueElement = addRow(name, '', 'element-info-value-color');\n    const swatch = createChild(valueElement, 'div', 'color-swatch');\n    const inner = createChild(swatch, 'div', 'color-swatch-inner');\n    inner.style.backgroundColor = color;\n    createTextChild(valueElement, formatColor(color, colorFormat));\n  }\n\n  function addContrastRow(fgColor: string, contrast: ContrastInfo) {\n    const parsedFgColor = parseHexa(fgColor);\n    const parsedBgColor = parseHexa(contrast.backgroundColor);\n    // Merge text opacity into the alpha channel of the color.\n    parsedFgColor[3] *= contrast.textOpacity;\n    const valueElement = addRow('Contrast', '', 'element-info-value-contrast');\n    const sampleText = createChild(valueElement, 'div', 'contrast-text');\n    sampleText.style.color = formatRgba(parsedFgColor, 'rgb');\n    sampleText.style.backgroundColor = contrast.backgroundColor;\n    sampleText.textContent = 'Aa';\n    const valueSpan = createChild(valueElement, 'span');\n    if (contrast.contrastAlgorithm === 'apca') {\n      const percentage = contrastRatioAPCA(parsedFgColor, parsedBgColor);\n      const threshold = getAPCAThreshold(contrast.fontSize, contrast.fontWeight);\n      valueSpan.textContent = String(Math.floor(percentage * 100) / 100) + '%';\n      createChild(\n          valueElement, 'div',\n          threshold === null || Math.abs(percentage) < threshold ? 'a11y-icon a11y-icon-warning' :\n                                                                   'a11y-icon a11y-icon-ok');\n    } else if (contrast.contrastAlgorithm === 'aa' || contrast.contrastAlgorithm === 'aaa') {\n      const ratio = contrastRatio(parsedFgColor, parsedBgColor);\n      const threshold = getContrastThreshold(contrast.fontSize, contrast.fontWeight)[contrast.contrastAlgorithm];\n      valueSpan.textContent = String(Math.floor(ratio * 100) / 100);\n      createChild(valueElement, 'div', ratio < threshold ? 'a11y-icon a11y-icon-warning' : 'a11y-icon a11y-icon-ok');\n    }\n  }\n\n  return elementInfoElement;\n}\n\n/**\n * @param {Object} elementInfo The highlight config object passed to drawHighlight\n * @param {String} colorFormat\n * @param {Object} bounds\n * @param {number} canvasWidth\n * @param {number} canvasHeight\n */\nfunction drawElementTitle(\n    elementInfo: ElementInfo, colorFormat: string, bounds: Bounds, canvasWidth: number, canvasHeight: number) {\n  // Get the tooltip container and empty it, there can only be one tooltip displayed at the same time.\n  const tooltipContainer = document.getElementById('tooltip-container');\n  if (!tooltipContainer) {\n    throw new Error('#tooltip-container is not found');\n  }\n\n  tooltipContainer.innerHTML = '';\n\n  // Create the necessary wrappers.\n  const wrapper = createChild(tooltipContainer, 'div');\n  const tooltipContent = createChild(wrapper, 'div', 'tooltip-content');\n\n  // Create the tooltip content and append it.\n  const tooltip = createElementDescription(elementInfo, colorFormat);\n  tooltipContent.appendChild(tooltip);\n\n  const titleWidth = tooltipContent.offsetWidth;\n  const titleHeight = tooltipContent.offsetHeight;\n  const arrowHalfWidth = 8;\n  const pageMargin = 2;\n  const arrowWidth = arrowHalfWidth * 2;\n  const arrowInset = arrowHalfWidth + 2;\n\n  const containerMinX = pageMargin + arrowInset;\n  const containerMaxX = canvasWidth - pageMargin - arrowInset - arrowWidth;\n\n  // Left align arrow to the tooltip but ensure it is pointing to the element.\n  // Center align arrow if the inspected element bounds are too narrow.\n  const boundsAreTooNarrow = bounds.maxX - bounds.minX < arrowWidth + 2 * arrowInset;\n  let arrowX: number;\n  if (boundsAreTooNarrow) {\n    arrowX = (bounds.minX + bounds.maxX) * 0.5 - arrowHalfWidth;\n  } else {\n    const xFromLeftBound = bounds.minX + arrowInset;\n    const xFromRightBound = bounds.maxX - arrowInset - arrowWidth;\n    if (xFromLeftBound > containerMinX && xFromLeftBound < containerMaxX) {\n      arrowX = xFromLeftBound;\n    } else {\n      arrowX = constrainNumber(containerMinX, xFromLeftBound, xFromRightBound);\n    }\n  }\n  // Hide arrow if element is completely off the sides of the page.\n  const arrowHidden = arrowX < containerMinX || arrowX > containerMaxX;\n\n  let boxX = arrowX - arrowInset;\n  boxX = constrainNumber(boxX, pageMargin, canvasWidth - titleWidth - pageMargin);\n\n  let boxY = bounds.minY - arrowHalfWidth - titleHeight;\n  let onTop = true;\n  if (boxY < 0) {\n    boxY = Math.min(canvasHeight - titleHeight, bounds.maxY + arrowHalfWidth);\n    onTop = false;\n  } else if (bounds.minY > canvasHeight) {\n    boxY = canvasHeight - arrowHalfWidth - titleHeight;\n  }\n\n  // If tooltip intersects with the bounds, hide it.\n  // Allow bounds to contain the box though for the large elements like <body>.\n  const includes = boxX >= bounds.minX && boxX + titleWidth <= bounds.maxX && boxY >= bounds.minY &&\n      boxY + titleHeight <= bounds.maxY;\n  const overlaps =\n      boxX < bounds.maxX && boxX + titleWidth > bounds.minX && boxY < bounds.maxY && boxY + titleHeight > bounds.minY;\n  if (overlaps && !includes) {\n    tooltipContent.style.display = 'none';\n    return;\n  }\n\n  tooltipContent.style.top = boxY + 'px';\n  tooltipContent.style.left = boxX + 'px';\n  tooltipContent.style.setProperty('--arrow-visibility', (arrowHidden || includes) ? 'hidden' : 'visible');\n  if (arrowHidden) {\n    return;\n  }\n\n  tooltipContent.style.setProperty('--arrow', onTop ? 'var(--arrow-down)' : 'var(--arrow-up)');\n  tooltipContent.style.setProperty('--shadow-direction', onTop ? 'var(--shadow-up)' : 'var(--shadow-down)');\n  // When tooltip is on-top remove 1px from the arrow's top value to get rid of whitespace produced by the tooltip's border.\n  tooltipContent.style.setProperty('--arrow-top', (onTop ? titleHeight - 1 : -arrowHalfWidth) + 'px');\n  tooltipContent.style.setProperty('--arrow-left', (arrowX - boxX) + 'px');\n}\n\nconst DEFAULT_RULER_COLOR = 'rgba(128, 128, 128, 0.3)';\n\nfunction drawRulers(\n    context: CanvasRenderingContext2D, bounds: PathBounds, rulerAtRight: boolean, rulerAtBottom: boolean,\n    color: string|undefined, dash: boolean, canvasWidth: number, canvasHeight: number) {\n  context.save();\n  const width = canvasWidth;\n  const height = canvasHeight;\n  context.strokeStyle = color || DEFAULT_RULER_COLOR;\n  context.lineWidth = 1;\n  context.translate(0.5, 0.5);\n  if (dash) {\n    context.setLineDash([3, 3]);\n  }\n\n  if (rulerAtRight) {\n    for (const y in bounds.rightmostXForY) {\n      context.beginPath();\n      context.moveTo(width, Number(y));\n      context.lineTo(bounds.rightmostXForY[y], Number(y));\n      context.stroke();\n    }\n  } else {\n    for (const y in bounds.leftmostXForY) {\n      context.beginPath();\n      context.moveTo(0, Number(y));\n      context.lineTo(bounds.leftmostXForY[y], Number(y));\n      context.stroke();\n    }\n  }\n\n  if (rulerAtBottom) {\n    for (const x in bounds.bottommostYForX) {\n      context.beginPath();\n      context.moveTo(Number(x), height);\n      context.lineTo(Number(x), bounds.topmostYForX[x]);\n      context.stroke();\n    }\n  } else {\n    for (const x in bounds.topmostYForX) {\n      context.beginPath();\n      context.moveTo(Number(x), 0);\n      context.lineTo(Number(x), bounds.topmostYForX[x]);\n      context.stroke();\n    }\n  }\n\n  context.restore();\n}\n"]}