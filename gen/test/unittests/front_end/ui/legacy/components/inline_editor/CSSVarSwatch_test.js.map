{"version":3,"file":"CSSVarSwatch_test.js","sourceRoot":"","sources":["../../../../../../../../../../test/unittests/front_end/ui/legacy/components/inline_editor/CSSVarSwatch_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assertNotNullOrUndefined} from '../../../../../../../front_end/core/platform/platform.js';\nimport * as InlineEditor from '../../../../../../../front_end/ui/legacy/components/inline_editor/inline_editor.js';\nimport {assertShadowRoot, renderElementIntoDOM} from '../../../../helpers/DOMHelpers.js';\nimport {describeWithLocale} from '../../../../helpers/EnvironmentHelpers.js';\n\nconst {assert} = chai;\n\nfunction assertSwatch(swatch: InlineEditor.CSSVarSwatch.CSSVarSwatch, expected: {\n  valueTooltip: string|null,\n  linkTooltip: string,\n  isDefined: boolean,\n  varText: string,\n  parsedColor?: string,\n}) {\n  assertShadowRoot(swatch.shadowRoot);\n  const container = swatch.shadowRoot.querySelector('span');\n  assertNotNullOrUndefined(container);\n\n  const link = container.querySelector('.css-var-link');\n  assertNotNullOrUndefined(link);\n\n  assert.strictEqual(\n      container.getAttribute('title'), expected.valueTooltip || '', 'The computed values appears as a tooltip');\n  assert.strictEqual(\n      link.classList.contains('undefined'), !expected.isDefined,\n      'The link only has the class undefined when the property is undefined');\n  assert.strictEqual(link.getAttribute('title'), expected.linkTooltip, 'The link has the right tooltip');\n  assert.strictEqual(link.textContent, expected.varText, 'The link has the right text content');\n}\n\ndescribeWithLocale('CSSVarSwatch', () => {\n  it('can be instantiated successfully', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n\n    assert.instanceOf(component, HTMLElement, 'The swatch is an instance of HTMLElement');\n  });\n\n  it('renders a simple var function', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--test)',\n      computedValue: '2px',\n      fromFallback: false,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: '2px',\n      linkTooltip: '2px',\n      isDefined: true,\n      varText: '--test',\n    });\n  });\n\n  it('renders a var function with an undefined property', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--undefined)',\n      computedValue: null,\n      fromFallback: false,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: null,\n      linkTooltip: '--undefined is not defined',\n      isDefined: false,\n      varText: '--undefined',\n    });\n  });\n\n  it('renders a var function with an undefined property but a fallback value', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--undefined, 3px)',\n      computedValue: '3px',\n      fromFallback: true,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: '3px',\n      linkTooltip: '--undefined is not defined',\n      isDefined: false,\n      varText: '--undefined',\n    });\n  });\n\n  it('renders a var() function with an color property but a fallback value', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--undefined-color, green)',\n      computedValue: 'green',\n      fromFallback: true,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: 'green',\n      linkTooltip: '--undefined-color is not defined',\n      isDefined: false,\n      varText: '--undefined-color',\n    });\n  });\n\n  it('render the var() function and the fallback value contains spaces', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--undefined-color,    green   )',\n      computedValue: 'green',\n      fromFallback: true,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: 'green',\n      linkTooltip: '--undefined-color is not defined',\n      isDefined: false,\n      varText: '--undefined-color',\n    });\n  });\n\n  it('renders a var() function with an color property', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var(--test, green)',\n      computedValue: 'red',\n      fromFallback: false,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: 'red',\n      linkTooltip: 'red',\n      isDefined: true,\n      varText: '--test',\n    });\n  });\n\n  it('renders a var() function with spaces', () => {\n    const component = new InlineEditor.CSSVarSwatch.CSSVarSwatch();\n    renderElementIntoDOM(component);\n    component.data = {\n      text: 'var( --test     )',\n      computedValue: 'red',\n      fromFallback: false,\n      onLinkActivate: () => {},\n    };\n\n    assertSwatch(component, {\n      valueTooltip: 'red',\n      linkTooltip: 'red',\n      isDefined: true,\n      varText: ' --test ',\n    });\n  });\n});\n"]}