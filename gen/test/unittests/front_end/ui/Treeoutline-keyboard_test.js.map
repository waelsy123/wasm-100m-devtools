{"version":3,"file":"Treeoutline-keyboard_test.js","sourceRoot":"","sources":["../../../../../../../test/unittests/front_end/ui/Treeoutline-keyboard_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nconst {assert} = chai;\n\nimport * as UI from '../../../../front_end/ui/legacy/legacy.js';\n\nimport {assertNotNullOrUndefined} from '../../../../front_end/core/platform/platform.js';\nimport {renderElementIntoDOM} from '../helpers/DOMHelpers.js';\n\ndescribe('TreeOutline', () => {\n  it('responds correctly to navigation keys', () => {\n    const treeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    renderElementIntoDOM(treeOutline.element);\n\n    for (let i = 0; i < 10; i++) {\n      const treeElement = new UI.TreeOutline.TreeElement(String(i), true);\n      treeElement.appendChild(new UI.TreeOutline.TreeElement(String(i) + ' child'));\n      treeOutline.appendChild(treeElement);\n    }\n\n    let selectedTitles: string[] = [];\n    treeOutline.addEventListener(UI.TreeOutline.Events.ElementSelected, event => {\n      selectedTitles.push(String(event.data.title));\n    });\n\n    const firstChild = treeOutline.firstChild();\n    assertNotNullOrUndefined(firstChild);\n    firstChild.select(false, true);\n\n    const distance = 25;\n\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    function sendKeyMultipleTimes(key: string, n: number) {\n      for (let i = 0; i < n; i++) {\n        sendKey(key);\n      }\n    }\n\n    sendKeyMultipleTimes('ArrowDown', distance);\n    assert.deepEqual(selectedTitles, ['1', '2', '3', '4', '5', '6', '7', '8', '9']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowUp', distance);\n    assert.deepEqual(selectedTitles, ['8', '7', '6', '5', '4', '3', '2', '1', '0']);\n    selectedTitles = [];\n\n    sendKey('End');\n    assert.deepEqual(selectedTitles, ['9']);\n    selectedTitles = [];\n\n    sendKey('Home');\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowRight', distance);\n    assert.deepEqual(selectedTitles, ['0 child']);\n    selectedTitles = [];\n\n    sendKeyMultipleTimes('ArrowLeft', distance);\n    assert.deepEqual(selectedTitles, ['0']);\n    selectedTitles = [];\n\n    const innerTreeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n    const firstInnerChild = new UI.TreeOutline.TreeElement('First inner child');\n    const firstInnerGrandChild = new UI.TreeOutline.TreeElement('First inner grandchild');\n    innerTreeOutline.appendChild(firstInnerChild);\n    firstInnerChild.appendChild(firstInnerGrandChild);\n\n    const treeElementForNestedTree = new UI.TreeOutline.TreeElement(innerTreeOutline.element);\n    treeOutline.appendChild(treeElementForNestedTree);\n\n    const innerFirstChild = innerTreeOutline.firstChild();\n    assertNotNullOrUndefined(innerFirstChild);\n    innerFirstChild.select(false, true);\n    sendKey('ArrowRight');\n\n    assert.isTrue(innerFirstChild.expanded, 'child is not expanded');\n\n    function sendKey(key: string) {\n      const deepActiveElement = document.deepActiveElement();\n      assertNotNullOrUndefined(deepActiveElement);\n      const keyEvent = new KeyboardEvent('keydown', {bubbles: true, cancelable: true, key});\n      deepActiveElement.dispatchEvent(keyEvent);\n    }\n  });\n});\n"]}