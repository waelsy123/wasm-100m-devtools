{"version":3,"file":"console-clear_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/console/console-clear_test.ts"],"names":[],"mappings":";AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;;AAE7B,+BAA4B;AAE5B,sDAAuE;AACvE,0EAA8D;AAC9D,sEAAyI;AAEzI,IAAA,8BAAQ,EAAC,iBAAiB,EAAE,KAAK;IAC/B,IAAA,wBAAE,EAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;QACzD,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAA,8BAAkB,GAAE,CAAC;QACxC,MAAM,IAAA,iBAAK,EAAC,yCAAoB,CAAC,CAAC;QAClC,MAAM,IAAA,uCAAkB,GAAE,CAAC;QAE3B,MAAM,IAAA,gBAAI,EAAC,oBAAoB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,IAAA,oDAA+B,EAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,oBAAoB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,IAAA,oDAA+B,EAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,oBAAoB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,IAAA,oDAA+B,EAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YACjE,MAAM,eAAe,GAAG,MAAM,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE;gBACnD,OAAO,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,8BAA8B,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7G,CAAC,CAAC,CAAC;YACH,aAAM,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,6CAA6C,CAAC,CAAC;QACpG,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;YACxD,MAAM,IAAA,oCAAe,EAAC,QAAQ,EAAE,kBAAkB,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;YAC1D,MAAM,QAAQ,CAAC,eAAe,CAAC,GAAG,EAAE;gBAClC,OAAO,QAAQ,CAAC,gBAAgB,CAAC,8BAA8B,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC;YAChF,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,MAAM,IAAA,gBAAI,EAAC,yDAAyD,EAAE,KAAK,IAAI,EAAE;YAC/E,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE;gBAC/C,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,8BAA8B,CAAC,CAAC;gBACtE,IAAI,CAAC,MAAM,EAAE;oBACX,aAAM,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;iBAC/D;gBACD,OAAO,MAAM,CAAC,WAAW,CAAC;YAC5B,CAAC,CAAC,CAAC;YACH,aAAM,CAAC,WAAW,CAAC,WAAW,EAAE,WAAW,EAAE,uCAAuC,CAAC,CAAC;QACxF,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\n\nimport {click, getBrowserAndPages, step} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {CONSOLE_TAB_SELECTOR, focusConsolePrompt, typeIntoConsole, typeIntoConsoleAndWaitForResult} from '../helpers/console-helpers.js';\n\ndescribe('The Console Tab', async function() {\n  it('is cleared via the console.clear() method', async () => {\n    const {frontend} = getBrowserAndPages();\n    await click(CONSOLE_TAB_SELECTOR);\n    await focusConsolePrompt();\n\n    await step('enter 1 in console', async () => {\n      await typeIntoConsoleAndWaitForResult(frontend, '1;');\n    });\n    await step('enter 2 in console', async () => {\n      await typeIntoConsoleAndWaitForResult(frontend, '2;');\n    });\n    await step('enter 3 in console', async () => {\n      await typeIntoConsoleAndWaitForResult(frontend, '3;');\n    });\n    await step('Check the evaluation results from console', async () => {\n      const evaluateResults = await frontend.evaluate(() => {\n        return Array.from(document.querySelectorAll('.console-user-command-result')).map(node => node.textContent);\n      });\n      assert.deepEqual(evaluateResults, ['1', '2', '3'], 'did not find expected output in the console');\n    });\n    await step('enter console.clear() in console', async () => {\n      await typeIntoConsole(frontend, 'console.clear();');\n    });\n    await step('wait for the console to be cleared', async () => {\n      await frontend.waitForFunction(() => {\n        return document.querySelectorAll('.console-user-command-result').length === 1;\n      });\n    });\n    await step('check that the remaining text in the console is correct', async () => {\n      const clearResult = await frontend.evaluate(() => {\n        const result = document.querySelector('.console-user-command-result');\n        if (!result) {\n          assert.fail('Could not find user command result in the DOM.');\n        }\n        return result.textContent;\n      });\n      assert.strictEqual(clearResult, 'undefined', 'the result of clear was not undefined');\n    });\n  });\n});\n"]}