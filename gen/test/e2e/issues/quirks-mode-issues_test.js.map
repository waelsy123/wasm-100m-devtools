{"version":3,"file":"quirks-mode-issues_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/issues/quirks-mode-issues_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assertNotNullOrUndefined, getResourcesPath, goToResource, matchStringArray} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {assertIssueTitle, expandIssue, getIssueByTitle, getResourcesElement, navigateToIssuesTab, waitForTableFromResourceSection, waitForTableFromResourceSectionContents} from '../helpers/issues-helpers.js';\n\nconst triggerQuirksModeIssueInIssuesTab = async (path: string) => {\n  await goToResource(path);\n  await navigateToIssuesTab();\n  await expandIssue();\n  const issueTitle = 'Page layout may be unexpected due to Quirks Mode';\n  await assertIssueTitle(issueTitle);\n  const issueElement = await getIssueByTitle(issueTitle);\n  assertNotNullOrUndefined(issueElement);\n  return issueElement;\n};\n\ndescribe('Quirks Mode issues', async () => {\n  it('should report Quirks Mode issues', async () => {\n    const issueElement = await triggerQuirksModeIssueInIssuesTab('elements/quirks-mode.html');\n    const section = await getResourcesElement('1 element', issueElement);\n    const expectedTableRows = [\n      [\n        'Document in the DOM tree',\n        'Mode',\n        'URL',\n      ],\n      [\n        'document',\n        'Quirks Mode',\n        `${getResourcesPath()}/elements/quirks-mode.html`,\n      ],\n    ];\n    await waitForTableFromResourceSectionContents(section.content, expectedTableRows);\n  });\n\n  it('should report Limited Quirks Mode issues', async () => {\n    const issueElement = await triggerQuirksModeIssueInIssuesTab('elements/limited-quirks-mode.html');\n    const section = await getResourcesElement('1 element', issueElement);\n    const expectedTableRows = [\n      [\n        'Document in the DOM tree',\n        'Mode',\n        'URL',\n      ],\n      [\n        'document',\n        'Limited Quirks Mode',\n        `${getResourcesPath()}/elements/limited-quirks-mode.html`,\n      ],\n    ];\n    await waitForTableFromResourceSectionContents(section.content, expectedTableRows);\n  });\n\n  it('should report Quirks Mode issues in iframes', async () => {\n    const issueElement = await triggerQuirksModeIssueInIssuesTab('elements/quirks-mode-iframes.html');\n    const section = await getResourcesElement('2 elements', issueElement);\n    await waitForTableFromResourceSection(section.content, table => {\n      if (table.length !== 3) {\n        return undefined;\n      }\n      if (matchStringArray(table[0], [\n            'Document in the DOM tree',\n            'Mode',\n            'URL',\n          ]) !== true) {\n        return undefined;\n      }\n      const [limitedQuirksMode, quirksMode] = table.slice(1).sort((rowA, rowB) => rowA[1].localeCompare(rowB[1]));\n      if (matchStringArray(limitedQuirksMode, [\n            'document',\n            'Limited Quirks Mode',\n            `${getResourcesPath()}/elements/limited-quirks-mode.html`,\n          ]) !== true) {\n        return undefined;\n      }\n      if (matchStringArray(quirksMode, [\n            'document',\n            'Quirks Mode',\n            `${getResourcesPath()}/elements/quirks-mode.html`,\n          ]) !== true) {\n        return undefined;\n      }\n      return true;\n    });\n  });\n});\n"]}