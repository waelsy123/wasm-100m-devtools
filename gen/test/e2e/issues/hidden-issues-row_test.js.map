{"version":3,"file":"hidden-issues-row_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/issues/hidden-issues-row_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\n\nimport {assertNotNullOrUndefined, goToResource, waitFor} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {getHiddenIssuesRow, getHiddenIssuesRowBody, getHideIssuesMenu, getHideIssuesMenuItem, getIssueHeaderByTitle, ISSUE, navigateToIssuesTab} from '../helpers/issues-helpers.js';\n\ndescribe('Hide issues row', async () => {\n  it('should be visible after hiding an issue', async () => {\n    await goToResource('issues/cross-origin-portal-post.html');\n    await navigateToIssuesTab();\n\n    const issueTitle = 'Cross-origin portal post messages are blocked on your site';\n    const issueHeader = await getIssueHeaderByTitle(issueTitle);\n    assertNotNullOrUndefined(issueHeader);\n    await issueHeader.hover();\n    const hideIssuesMenuBtn = await getHideIssuesMenu();\n    await hideIssuesMenuBtn.click();\n    const menuItem = await getHideIssuesMenuItem();\n    assertNotNullOrUndefined(menuItem);\n    await menuItem.click();\n    await waitFor('.hidden-issue');\n    const hiddenIssuesRow = await getHiddenIssuesRow();\n    const isHidden = await hiddenIssuesRow?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n  });\n  it('should expand after clicking', async () => {\n    await goToResource('issues/cross-origin-portal-post.html');\n    await navigateToIssuesTab();\n\n    const issueTitle = 'Cross-origin portal post messages are blocked on your site';\n    const issueHeader = await getIssueHeaderByTitle(issueTitle);\n    assertNotNullOrUndefined(issueHeader);\n    await issueHeader.hover();\n    const hideIssuesMenuBtn = await getHideIssuesMenu();\n    await hideIssuesMenuBtn.click();\n    const menuItem = await getHideIssuesMenuItem();\n    assertNotNullOrUndefined(menuItem);\n    await menuItem.click();\n    const hiddenIssuesRow = await getHiddenIssuesRow();\n    let isHidden = await hiddenIssuesRow?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n    await hiddenIssuesRow?.click();\n    const hiddenIssuesRowBody = await getHiddenIssuesRowBody();\n    isHidden = await hiddenIssuesRowBody?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n    const classes = await hiddenIssuesRow?.evaluate(node => node.classList.toString());\n    assert.include(classes, 'expanded');\n  });\n\n  it('should contain issue after clicking', async () => {\n    await goToResource('issues/cross-origin-portal-post.html');\n    await navigateToIssuesTab();\n\n    const issueTitle = 'Cross-origin portal post messages are blocked on your site';\n    const issueHeader = await getIssueHeaderByTitle(issueTitle);\n    assertNotNullOrUndefined(issueHeader);\n    await issueHeader.hover();\n    const hideIssuesMenuBtn = await getHideIssuesMenu();\n    await hideIssuesMenuBtn.click();\n    const menuItem = await getHideIssuesMenuItem();\n    assertNotNullOrUndefined(menuItem);\n    await menuItem.click();\n    await waitFor('.hidden-issue');\n    const hiddenIssuesRow = await getHiddenIssuesRow();\n    let isHidden = await hiddenIssuesRow?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n    await hiddenIssuesRow?.click();\n    const hiddenIssuesRowBody = await getHiddenIssuesRowBody();\n    isHidden = await hiddenIssuesRowBody?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n    const firstChild = await hiddenIssuesRowBody?.$eval('.issue', node => node.classList.toString());\n    assertNotNullOrUndefined(firstChild);\n    assert.include(firstChild, 'hidden-issue');\n  });\n\n  it('should contain Unhide all issues button', async () => {\n    await goToResource('issues/cross-origin-portal-post.html');\n    await navigateToIssuesTab();\n\n    const issueTitle = 'Cross-origin portal post messages are blocked on your site';\n    const issueHeader = await getIssueHeaderByTitle(issueTitle);\n    assertNotNullOrUndefined(issueHeader);\n    await issueHeader.hover();\n    const hideIssuesMenuBtn = await getHideIssuesMenu();\n    await hideIssuesMenuBtn.click();\n    const menuItem = await getHideIssuesMenuItem();\n    assertNotNullOrUndefined(menuItem);\n    await menuItem.click();\n    const hiddenIssuesRow = await getHiddenIssuesRow();\n    const isHidden = await hiddenIssuesRow?.evaluate(node => node.classList.contains('hidden'));\n    assert.isFalse(isHidden);\n    const hasUnhideAllIssuesBtn = await hiddenIssuesRow?.evaluate(\n        node => node.lastElementChild?.lastElementChild?.classList.contains('unhide-all-issues-button'));\n    assert.isTrue(hasUnhideAllIssuesBtn);\n  });\n\n  it('should get hidden and unhide all issues upon clicking unhide all issues button', async () => {\n    await goToResource('issues/cross-origin-portal-post.html');\n    await navigateToIssuesTab();\n\n    const issueTitle = 'Cross-origin portal post messages are blocked on your site';\n    const issueHeader = await getIssueHeaderByTitle(issueTitle);\n    assertNotNullOrUndefined(issueHeader);\n    await issueHeader.hover();\n    const hideIssuesMenuBtn = await getHideIssuesMenu();\n    await hideIssuesMenuBtn.click();\n    const menuItem = await getHideIssuesMenuItem();\n    assertNotNullOrUndefined(menuItem);\n    await menuItem.click();\n    const unhideAllIssuesbtn = await waitFor('.unhide-all-issues-button');\n    await unhideAllIssuesbtn.click();\n    const hiddenIssuesRow = await getHiddenIssuesRow();\n    const isHidden = await hiddenIssuesRow?.evaluate(node => node.classList.contains('hidden'));\n    assert.isTrue(isHidden);\n    await waitFor(ISSUE);\n  });\n});\n"]}