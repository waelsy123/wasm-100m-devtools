{"version":3,"file":"memory_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/memory/memory_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\nimport type {puppeteer} from '../../shared/helper.js';\nimport {$$, assertNotNullOrUndefined, click, getBrowserAndPages, goToResource, step, waitFor, waitForElementsWithTextContent, waitForElementWithTextContent, waitForFunction, waitForNoElementsWithTextContent} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {changeAllocationSampleViewViaDropdown, changeViewViaDropdown, findSearchResult, getDataGridRows, navigateToMemoryTab, setSearchFilter, takeAllocationProfile, takeAllocationTimelineProfile, takeHeapSnapshot, waitForNonEmptyHeapSnapshotData, waitForRetainerChain, waitForSearchResultNumber, waitUntilRetainerChainSatisfies} from '../helpers/memory-helpers.js';\n\ndescribe('The Memory Panel', async function() {\n  // These tests render large chunks of data into DevTools and filter/search\n  // through it. On bots with less CPU power, these can fail because the\n  // rendering takes a long time, so we allow a much larger timeout.\n  if (this.timeout() !== 0) {\n    this.timeout(100000);\n  }\n\n  it('Loads content', async () => {\n    await goToResource('memory/default.html');\n    await navigateToMemoryTab();\n  });\n\n  it('Can take several heap snapshots ', async () => {\n    await goToResource('memory/default.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    const heapSnapShots = await $$('.heap-snapshot-sidebar-tree-item');\n    assert.strictEqual(heapSnapShots.length, 2);\n  });\n\n  it('Shows a DOM node and its JS wrapper as a single node', async () => {\n    await goToResource('memory/detached-node.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('leaking');\n    await waitForSearchResultNumber(4);\n    await findSearchResult(async p => {\n      const el = await p.$(':scope > td > div > .object-value-function');\n      return el !== null && await el.evaluate(el => el.textContent === 'leaking()');\n    });\n    await waitForRetainerChain([\n      'Detached V8EventListener',\n      'Detached EventListener',\n      'Detached InternalNode',\n      'Detached InternalNode',\n      'Detached HTMLDivElement',\n      'Retainer',\n      'Window',\n    ]);\n  });\n\n  // Flaky test\n  it.skipOnPlatforms(\n      ['mac', 'linux'], '[crbug.com/1134602] Correctly retains the path for event listeners', async () => {\n        await goToResource('memory/event-listeners.html');\n        await step('taking a heap snapshot', async () => {\n          await navigateToMemoryTab();\n          await takeHeapSnapshot();\n          await waitForNonEmptyHeapSnapshotData();\n        });\n        await step('searching for the event listener', async () => {\n          await setSearchFilter('myEventListener');\n          await waitForSearchResultNumber(4);\n        });\n\n        await step('selecting the search result that we need', async () => {\n          await findSearchResult(async p => {\n            const el = await p.$(':scope > td > div > .object-value-function');\n            return el !== null && await el.evaluate(el => el.textContent === 'myEventListener()');\n          });\n        });\n\n        await step('waiting for retainer chain', async () => {\n          await waitForRetainerChain([\n            'V8EventListener',\n            'EventListener',\n            'InternalNode',\n            'InternalNode',\n            'HTMLBodyElement',\n            'HTMLHtmlElement',\n            'HTMLDocument',\n            'Window',\n          ]);\n        });\n      });\n\n  it('Puts all ActiveDOMObjects with pending activities into one group', async () => {\n    const {frontend} = getBrowserAndPages();\n    await goToResource('memory/dom-objects.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    // The test ensures that the following structure is present:\n    // Pending activities\n    // -> Pending activities\n    //    -> InternalNode\n    //       -> MediaQueryList\n    //       -> MediaQueryList\n    await setSearchFilter('Pending activities');\n    // Here and below we have to wait until the elements are actually created\n    // and visible.\n    const [pendingActivitiesSpan] = await waitForFunction(async () => {\n      const elements = await frontend.$x('//span[text()=\"Pending activities\"]');\n      return elements.length > 0 ? elements : undefined;\n    });\n    const [pendingActiviesRow] = await pendingActivitiesSpan.$x('ancestor-or-self::tr');\n    await waitForFunction(async () => {\n      await click(pendingActivitiesSpan);\n      const res = await pendingActiviesRow.evaluate(x => x.classList.toString());\n      return res.includes('selected');\n    });\n    await frontend.keyboard.press('ArrowRight');\n    const [internalNodeSpan] = await waitForFunction(async () => {\n      const elements = await frontend.$x(\n          '//span[text()=\"InternalNode\"][ancestor-or-self::tr[preceding-sibling::*[1][//span[text()=\"Pending activities\"]]]]');\n      return elements.length === 1 ? elements : undefined;\n    });\n    const [internalNodeRow] = await internalNodeSpan.$x('ancestor-or-self::tr');\n    await waitForFunction(async () => {\n      await click(internalNodeSpan);\n      const res = await internalNodeRow.evaluate(x => x.classList.toString());\n      return res.includes('selected');\n    });\n    await frontend.keyboard.press('ArrowRight');\n    await waitForFunction(async () => {\n      const pendingActiviesChildren = await waitForElementsWithTextContent('MediaQueryList');\n      return pendingActiviesChildren.length === 2;\n    });\n  });\n\n  it('Shows the correct number of divs for a detached DOM tree correctly', async () => {\n    await goToResource('memory/detached-dom-tree.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('Detached HTMLDivElement');\n    await waitForSearchResultNumber(3);\n  });\n\n  it('Shows the correct output for an attached iframe', async () => {\n    await goToResource('memory/attached-iframe.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('Retainer');\n    await waitForSearchResultNumber(8);\n    await findSearchResult(async p => {\n      const el = await p.$(':scope > td > div > .object-value-object');\n      return el !== null && await el.evaluate(el => el.textContent === 'Retainer');\n    });\n    // The following line checks two things: That the property 'aUniqueName'\n    // in the iframe is retaining the Retainer class object, and that the\n    // iframe window is not detached.\n    await waitUntilRetainerChainSatisfies(\n        retainerChain => retainerChain.some(\n            ({propertyName, retainerClassName}) => propertyName === 'aUniqueName' && retainerClassName === 'Window'));\n  });\n\n  it('Correctly shows multiple retainer paths for an object', async () => {\n    await goToResource('memory/multiple-retainers.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('leaking');\n    await waitForSearchResultNumber(4);\n    await findSearchResult(async p => {\n      const el = await p.$(':scope > td > div > .object-value-string');\n      return el !== null && await el.evaluate(el => el.textContent === '\"leaking\"');\n    });\n\n    await waitForFunction(async () => {\n      // Wait for all the rows of the data-grid to load.\n      const retainerGridElements = await getDataGridRows('.retaining-paths-view table.data');\n      return retainerGridElements.length === 9;\n    });\n\n    const sharedInLeakingElementRow = await waitForFunction(async () => {\n      const results = await getDataGridRows('.retaining-paths-view table.data');\n      const findPromises = await Promise.all(results.map(async e => {\n        const textContent = await e.evaluate(el => el.textContent);\n        // Can't search for \"shared in leaking()\" because the different parts are spaced with CSS.\n        return textContent && textContent.startsWith('sharedinleaking()') ? e : null;\n      }));\n      return findPromises.find(result => result !== null);\n    });\n\n    if (!sharedInLeakingElementRow) {\n      assert.fail('Could not find data-grid row with \"shared in leaking()\" text.');\n    }\n\n    const textOfEl = await sharedInLeakingElementRow.evaluate(e => e.textContent || '');\n    // Double check we got the right element to avoid a confusing text failure\n    // later down the line.\n    assert.isTrue(textOfEl.startsWith('sharedinleaking()'));\n\n    // Have to click it not in the middle as the middle can hold the link to the\n    // file in the sources pane and we want to avoid clicking that.\n    await click(sharedInLeakingElementRow, {maxPixelsFromLeft: 10});\n    const {frontend} = getBrowserAndPages();\n    // Expand the data-grid for the shared list\n    await frontend.keyboard.press('ArrowRight');\n\n    // check that we found two V8EventListener objects\n    await waitForFunction(async () => {\n      const pendingActiviesChildren = await waitForElementsWithTextContent('V8EventListener');\n      return pendingActiviesChildren.length === 2;\n    });\n\n    // Now we want to get the two rows below the \"shared in leaking()\" row and assert on them.\n    // Unfortunately they are not structured in the data-grid as children, despite being children in the UI\n    // So the best way to get at them is to grab the two subsequent siblings of the \"shared in leaking()\" row.\n    const nextRow =\n        await sharedInLeakingElementRow.evaluateHandle<puppeteer.ElementHandle<HTMLElement>>(e => e.nextSibling);\n    if (!nextRow) {\n      assert.fail('Could not find row below \"shared in leaking()\" row');\n    }\n    const nextNextRow = await nextRow.evaluateHandle<puppeteer.ElementHandle<HTMLElement>>(e => e.nextSibling);\n    if (!nextNextRow) {\n      assert.fail('Could not find 2nd row below \"shared in leaking()\" row');\n    }\n\n    const childText = await Promise.all([nextRow, nextNextRow].map(async row => await row.evaluate(r => r.innerText)));\n\n    assert.isTrue(childText[0].includes('inV8EventListener'));\n    assert.isTrue(childText[1].includes('inEventListener'));\n  });\n\n  // Flaky test causing build failures\n  it.skip('[crbug.com/1239550] Shows the correct output for a detached iframe', async () => {\n    await goToResource('memory/detached-iframe.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('Leak');\n    await waitForSearchResultNumber(8);\n    await waitUntilRetainerChainSatisfies(\n        retainerChain => retainerChain.some(({retainerClassName}) => retainerClassName === 'Detached Window'));\n  });\n\n  it('Shows the a tooltip', async () => {\n    await goToResource('memory/detached-dom-tree.html');\n    await navigateToMemoryTab();\n    await takeHeapSnapshot();\n    await waitForNonEmptyHeapSnapshotData();\n    await setSearchFilter('Detached HTMLDivElement');\n    await waitForSearchResultNumber(3);\n    await waitUntilRetainerChainSatisfies(retainerChain => {\n      return retainerChain.length > 0 && retainerChain[0].propertyName === 'retaining_wrapper';\n    });\n    const rows = await getDataGridRows('.retaining-paths-view table.data');\n    const propertyNameElement = await rows[0].$('span.property-name');\n    assertNotNullOrUndefined(propertyNameElement);\n    propertyNameElement.hover();\n    const el = await waitFor('div.vbox.flex-auto.no-pointer-events');\n    await waitFor('.source-code', el);\n  });\n\n  it('shows the flamechart for an allocation sample', async () => {\n    const {frontend} = getBrowserAndPages();\n    await goToResource('memory/allocations.html');\n    await navigateToMemoryTab();\n    void takeAllocationProfile(frontend);\n    void changeAllocationSampleViewViaDropdown('Chart');\n    await waitFor('canvas.flame-chart-canvas');\n  });\n\n  it('shows allocations for an allocation timeline', async () => {\n    const {frontend} = getBrowserAndPages();\n    await goToResource('memory/allocations.html');\n    await navigateToMemoryTab();\n    void takeAllocationTimelineProfile(frontend, {recordStacks: true});\n    await changeViewViaDropdown('Allocation');\n\n    const header = await waitForElementWithTextContent('Live Count');\n    const table = await header.evaluateHandle(node => {\n      return node.closest('.data-grid');\n    });\n    await waitFor('.data-grid-data-grid-node', table);\n  });\n\n  it('does not show allocations perspective when stacks not recorded', async () => {\n    const {frontend} = getBrowserAndPages();\n    await goToResource('memory/allocations.html');\n    await navigateToMemoryTab();\n    void takeAllocationTimelineProfile(frontend, {recordStacks: false});\n    const dropdown = await waitFor('select[aria-label=\"Perspective\"]');\n    await waitForNoElementsWithTextContent('Allocation', dropdown);\n  });\n});\n"]}