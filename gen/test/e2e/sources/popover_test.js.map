{"version":3,"file":"popover_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/sources/popover_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\n\nimport {click, getBrowserAndPages, waitFor} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {addBreakpointForLine, openSourceCodeEditorForFile, RESUME_BUTTON} from '../helpers/sources-helpers.js';\n\ndescribe('Sources Tab', async function() {\n  it('shows correct preview for `object.foo` member expressions', async () => {\n    const {target, frontend} = getBrowserAndPages();\n\n    await openSourceCodeEditorForFile('popover.js', 'popover.html');\n    await addBreakpointForLine(frontend, 5);\n\n    const scriptEvaluation = target.evaluate('f1();');\n    const lastElement = await waitFor('.cm-executionLine > span:last-child');\n    await lastElement.hover();\n\n    const popover = await waitFor('[data-stable-name-for-test=\"object-popover-content\"]');\n    const value = await waitFor('.object-value-number', popover).then(e => e.evaluate(node => node.textContent));\n    assert.strictEqual(value, '1');\n\n    await click(RESUME_BUTTON);\n    await scriptEvaluation;\n  });\n\n  it('shows correct preview for `array[1].foo` member expressions', async () => {\n    const {target, frontend} = getBrowserAndPages();\n\n    await openSourceCodeEditorForFile('popover.js', 'popover.html');\n    await addBreakpointForLine(frontend, 9);\n\n    const scriptEvaluation = target.evaluate('f2();');\n    const lastElement = await waitFor('.cm-executionLine > span:last-child');\n    await lastElement.hover();\n\n    const popover = await waitFor('[data-stable-name-for-test=\"object-popover-content\"]');\n    const value = await waitFor('.object-value-number', popover).then(e => e.evaluate(node => node.textContent));\n    assert.strictEqual(value, '5');\n\n    await click(RESUME_BUTTON);\n    await scriptEvaluation;\n  });\n\n  it('shows correct preview for `array[i][0]` member expressions', async () => {\n    const {target, frontend} = getBrowserAndPages();\n\n    await openSourceCodeEditorForFile('popover.js', 'popover.html');\n    await addBreakpointForLine(frontend, 13);\n\n    const scriptEvaluation = target.evaluate('f3(3);');\n    const lastElement = await waitFor('.cm-executionLine > span:last-child');\n    await lastElement.hover();\n\n    const popover = await waitFor('[data-stable-name-for-test=\"object-popover-content\"]');\n    const value = await waitFor('.object-value-number', popover).then(e => e.evaluate(node => node.textContent));\n    assert.strictEqual(value, '42');\n\n    await click(RESUME_BUTTON);\n    await scriptEvaluation;\n  });\n\n  it('shows correct preview for `this.#x` member expressions in TypeScript', async () => {\n    const {target, frontend} = getBrowserAndPages();\n\n    await openSourceCodeEditorForFile('popover-typescript.ts', 'popover-typescript.html');\n    await addBreakpointForLine(frontend, 5);\n\n    const scriptEvaluation = target.evaluate('test();');\n    const lastElement = await waitFor('.cm-executionLine > span:last-child');\n    await lastElement.hover();\n\n    const popover = await waitFor('[data-stable-name-for-test=\"object-popover-content\"]');\n    const value = await waitFor('.object-value-number', popover).then(e => e.evaluate(node => node.textContent));\n    assert.strictEqual(value, '84');\n\n    await click(RESUME_BUTTON);\n    await scriptEvaluation;\n  });\n\n  it('shows correct preview for `this.#x` member expressions despite Terser minification', async () => {\n    const {target, frontend} = getBrowserAndPages();\n\n    await openSourceCodeEditorForFile('popover-terser.js', 'popover-terser.html');\n    await addBreakpointForLine(frontend, 5);\n\n    const scriptEvaluation = target.evaluate('test();');\n    const lastElement = await waitFor('.cm-executionLine > span:last-child');\n    await lastElement.hover();\n\n    const popover = await waitFor('[data-stable-name-for-test=\"object-popover-content\"]');\n    const value = await waitFor('.object-value-number', popover).then(e => e.evaluate(node => node.textContent));\n    assert.strictEqual(value, '21');\n\n    await click(RESUME_BUTTON);\n    await scriptEvaluation;\n  });\n});\n"]}