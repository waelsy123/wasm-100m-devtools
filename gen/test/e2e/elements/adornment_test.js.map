{"version":3,"file":"adornment_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/elements/adornment_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {click, getBrowserAndPages, goToResource} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {editCSSProperty, expandSelectedNodeRecursively, INACTIVE_GRID_ADORNER_SELECTOR, waitForAdornerOnSelectedNode, waitForAdorners, waitForContentOfSelectedElementsNode, waitForElementsStyleSection} from '../helpers/elements-helpers.js';\n\nconst prepareElementsTab = async () => {\n  await waitForElementsStyleSection();\n  await waitForContentOfSelectedElementsNode('<body>\\u200B');\n  await expandSelectedNodeRecursively();\n};\n\ndescribe('Adornment in the Elements Tab', async function() {\n  // This test relies on the context menu which takes a while to appear, so we bump the timeout a bit.\n  this.timeout(10000);\n\n  it('displays grid and flex adorners', async () => {\n    await goToResource('elements/adornment.html');\n    await prepareElementsTab();\n\n    await waitForAdorners([\n      {textContent: 'grid', isActive: false},\n      {textContent: 'grid', isActive: false},\n      {textContent: 'flex', isActive: false},\n      {textContent: 'flex', isActive: false},\n    ]);\n  });\n\n  it('displays scroll-snap adorners', async () => {\n    await goToResource('elements/adornment-scroll-snap.html');\n    await prepareElementsTab();\n\n    await waitForAdorners([\n      {textContent: 'scroll-snap', isActive: false},\n    ]);\n  });\n\n  it('displays container query adorners', async () => {\n    await goToResource('elements/adornment-container-query.html');\n    await prepareElementsTab();\n\n    await waitForAdorners([\n      {textContent: 'container', isActive: false},\n    ]);\n  });\n\n  // Flaky test\n  it.skip('[crbug.com/1134593] can toggle adorners', async () => {\n    await goToResource('elements/adornment.html');\n    await prepareElementsTab();\n\n    await waitForAdorners([\n      {textContent: 'grid', isActive: false},\n      {textContent: 'grid', isActive: false},\n    ]);\n\n    // Toggle both grid adorners on and try to select them with the active selector\n    await click(INACTIVE_GRID_ADORNER_SELECTOR);\n    await click(INACTIVE_GRID_ADORNER_SELECTOR);\n\n    await waitForAdorners([\n      {textContent: 'grid', isActive: true},\n      {textContent: 'grid', isActive: true},\n    ]);\n  });\n\n  it('does not display adorners on shadow roots when their parents are grid or flex containers', async () => {\n    await goToResource('elements/adornment-shadow.html');\n    await prepareElementsTab();\n\n    await waitForAdorners([\n      {textContent: 'grid', isActive: false},\n      {textContent: 'flex', isActive: false},\n    ]);\n  });\n\n  it('updates when display properties change', async () => {\n    // Note that this test simulates several property value editing, like a user would type, with delay between\n    // keystrokes. So if this test became flaky in the future, we'd likely have to increase the timeout.\n    await goToResource('elements/adornment.html');\n    await prepareElementsTab();\n\n    // Select the first element.\n    const {frontend} = getBrowserAndPages();\n    await frontend.keyboard.press('ArrowDown');\n\n    await waitForAdornerOnSelectedNode('grid');\n\n    await editCSSProperty('.grid', 'display', 'flex');\n    await waitForAdornerOnSelectedNode('flex');\n\n    await editCSSProperty('.grid', 'display', 'inline-grid');\n    await waitForAdornerOnSelectedNode('grid');\n  });\n});\n"]}