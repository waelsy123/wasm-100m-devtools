{"version":3,"file":"pseudo-states_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/elements/pseudo-states_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\n\nimport {debuggerStatement, getBrowserAndPages, goToResource, step, timeout} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {assertGutterDecorationForDomNodeExists, forcePseudoState, getComputedStylesForDomNode, removePseudoState, waitForContentOfSelectedElementsNode, waitForDomNodeToBeHidden, waitForDomNodeToBeVisible, waitForElementsStyleSection} from '../helpers/elements-helpers.js';\n\nconst TARGET_SHOWN_ON_HOVER_SELECTOR = '.show-on-hover';\nconst TARGET_SHOWN_ON_FOCUS_SELECTOR = '.show-on-focus';\nconst TARGET_SHOWN_ON_TARGET_SELECTOR = '#show-on-target';\n\ndescribe('The Elements tab', async () => {\n  // Flaky test\n  it.skipOnPlatforms(['mac'], '[crbug.com/1280763] can force :hover state for selected DOM node', async () => {\n    const {frontend} = getBrowserAndPages();\n\n    await goToResource('elements/hover.html');\n\n    await waitForElementsStyleSection();\n\n    await step('Ensure the correct node is selected after opening a file', async () => {\n      await waitForContentOfSelectedElementsNode('<body>\\u200B');\n    });\n\n    // FIXME(crbug/1112692): Refactor test to remove the timeout.\n    await timeout(50);\n\n    await step('Select div that we can focus', async () => {\n      await frontend.keyboard.press('ArrowRight');\n      await waitForContentOfSelectedElementsNode('<div id=\\u200B\"hover\">\\u200B…\\u200B</div>\\u200B');\n    });\n\n    await forcePseudoState(':hover');\n    await assertGutterDecorationForDomNodeExists();\n    await waitForDomNodeToBeVisible(TARGET_SHOWN_ON_HOVER_SELECTOR);\n\n    const displayComputedStyle = await getComputedStylesForDomNode(TARGET_SHOWN_ON_HOVER_SELECTOR, 'display');\n    assert.strictEqual(displayComputedStyle, 'inline');\n  });\n\n  it('can force :target state for selected DOM node', async () => {\n    const {frontend} = getBrowserAndPages();\n\n    await goToResource('elements/target.html');\n\n    await waitForElementsStyleSection();\n\n    await step('Ensure the correct node is selected after opening a file', async () => {\n      await waitForContentOfSelectedElementsNode('<body>\\u200B');\n    });\n\n    // FIXME(crbug/1112692): Refactor test to remove the timeout.\n    await timeout(50);\n\n    await step('Select element that we can target', async () => {\n      await frontend.keyboard.press('ArrowRight');\n      await waitForContentOfSelectedElementsNode(\n          '<span id=\\u200B\"show-on-target\">\\u200BSome text here, only shown on :target\\u200B</span>\\u200B');\n    });\n\n    await forcePseudoState(':target');\n    await assertGutterDecorationForDomNodeExists();\n    await waitForDomNodeToBeVisible(TARGET_SHOWN_ON_TARGET_SELECTOR);\n\n    const displayComputedStyle = await getComputedStylesForDomNode(TARGET_SHOWN_ON_TARGET_SELECTOR, 'display');\n    assert.strictEqual(displayComputedStyle, 'inline');\n  });\n\n  // Flaky test\n  it.skipOnPlatforms(['mac'], '[crbug.com/1134593] can force :focus state for selected DOM node', async () => {\n    const {frontend} = getBrowserAndPages();\n\n    await goToResource('elements/focus.html');\n\n    await waitForElementsStyleSection();\n\n    await step('Ensure the correct node is selected after opening a file', async () => {\n      await waitForContentOfSelectedElementsNode('<body>\\u200B');\n    });\n\n    // FIXME(crbug/1112692): Refactor test to remove the timeout.\n    await timeout(50);\n\n    await step('Select div that we can focus', async () => {\n      await frontend.keyboard.press('ArrowRight');\n      await waitForContentOfSelectedElementsNode('<div id=\\u200B\"focus\" tabindex=\\u200B\"0\">\\u200B…\\u200B</div>\\u200B');\n    });\n\n    await forcePseudoState(':focus');\n    await assertGutterDecorationForDomNodeExists();\n    await waitForDomNodeToBeVisible(TARGET_SHOWN_ON_FOCUS_SELECTOR);\n\n    const displayComputedStyle = await getComputedStylesForDomNode(TARGET_SHOWN_ON_FOCUS_SELECTOR, 'display');\n    assert.strictEqual(displayComputedStyle, 'inline');\n\n    const backgroundColorComputedStyle = await getComputedStylesForDomNode('#focus', 'backgroundColor');\n    assert.strictEqual(backgroundColorComputedStyle, 'rgb(0, 128, 0)');\n  });\n\n  // Flaky test\n  it.skipOnPlatforms(['mac'], '[crbug.com/1280763] can remove :focus state', async () => {\n    const {frontend} = getBrowserAndPages();\n\n    await goToResource('elements/focus.html');\n\n    await waitForElementsStyleSection();\n\n    await step('Ensure the correct node is selected after opening a file', async () => {\n      await waitForContentOfSelectedElementsNode('<body>\\u200B');\n    });\n\n    // FIXME(crbug/1112692): Refactor test to remove the timeout.\n    await timeout(50);\n\n    await step('Select div that we can focus', async () => {\n      await frontend.keyboard.press('ArrowRight');\n      await waitForContentOfSelectedElementsNode('<div id=\\u200B\"focus\" tabindex=\\u200B\"0\">\\u200B…\\u200B</div>\\u200B');\n    });\n\n    await forcePseudoState(':focus');\n    await assertGutterDecorationForDomNodeExists();\n    await waitForDomNodeToBeVisible(TARGET_SHOWN_ON_FOCUS_SELECTOR);\n\n    const displayComputedStyle = await getComputedStylesForDomNode(TARGET_SHOWN_ON_FOCUS_SELECTOR, 'display');\n    assert.strictEqual(displayComputedStyle, 'inline');\n\n    const backgroundColorComputedStyle = await getComputedStylesForDomNode('#focus', 'backgroundColor');\n    assert.strictEqual(backgroundColorComputedStyle, 'rgb(0, 128, 0)');\n\n    await removePseudoState(':focus');\n    await waitForDomNodeToBeHidden(TARGET_SHOWN_ON_FOCUS_SELECTOR);\n\n    await debuggerStatement(frontend);\n\n    const hiddenDisplayStyle = await getComputedStylesForDomNode(TARGET_SHOWN_ON_FOCUS_SELECTOR, 'display');\n    assert.strictEqual(hiddenDisplayStyle, 'none');\n  });\n});\n"]}