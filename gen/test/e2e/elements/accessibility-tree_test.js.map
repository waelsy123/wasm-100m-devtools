{"version":3,"file":"accessibility-tree_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/elements/accessibility-tree_test.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assertNotNullOrUndefined, click, enableExperiment, getBrowserAndPages, goToResource, waitForAria, waitForNone} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {toggleAccessibilityTree} from '../helpers/elements-helpers.js';\n\ndescribe('Accessibility Tree in the Elements Tab', async function() {\n  it('displays the fuller accessibility tree', async () => {\n    await enableExperiment('fullAccessibilityTree');\n    await goToResource('elements/accessibility-simple-page.html');\n    await toggleAccessibilityTree();\n    await waitForAria('heading\\xa0\"Title\" [role=\"treeitem\"]');\n    await waitForAria('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n  });\n\n  it('allows navigating iframes', async () => {\n    await enableExperiment('fullAccessibilityTree');\n    await goToResource('elements/accessibility-iframe-page.html');\n    await toggleAccessibilityTree();\n    void waitForAria('RootWebArea\\xa0\"Page with nested iframe\" [role=\"treeitem\"]');\n    const iframeDoc = await waitForAria(\n        'RootWebArea\\xa0\"Simple page with aria labeled element\"\\xa0focusable:\\xa0true [role=\"treeitem\"]');\n    assertNotNullOrUndefined(iframeDoc);\n    await click('.arrow-icon', {root: iframeDoc});\n    await waitForAria('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n  });\n\n  it('listens for text changes to DOM and redraws the tree', async () => {\n    await enableExperiment('fullAccessibilityTree');\n    await goToResource('elements/accessibility-simple-page.html');\n    await toggleAccessibilityTree();\n    const {target} = getBrowserAndPages();\n    await waitForAria('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n    const link = await target.waitForSelector('aria/cats [role=\"link\"]');\n    assertNotNullOrUndefined(link);\n    await link.evaluate(node => {\n      (node as HTMLElement).innerText = 'dogs';\n    });\n    await waitForAria('link\\xa0\"dogs\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n  });\n\n  it('listens for changes to properties and redraws tree', async () => {\n    await enableExperiment('fullAccessibilityTree');\n    await goToResource('elements/accessibility-simple-page.html');\n    await toggleAccessibilityTree();\n    const {target} = getBrowserAndPages();\n    const link = await target.waitForSelector('aria/cats [role=\"link\"]');\n    assertNotNullOrUndefined(link);\n    await waitForAria('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n    await link.evaluate(node => node.setAttribute('aria-label', 'birds'));\n    await waitForAria('link\\xa0\"birds\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n  });\n\n  it('listen for removed nodes and redraw tree', async () => {\n    await enableExperiment('fullAccessibilityTree');\n    await goToResource('elements/accessibility-simple-page.html');\n    await toggleAccessibilityTree();\n    const {target} = getBrowserAndPages();\n    const link = await target.waitForSelector('aria/cats [role=\"link\"]');\n    assertNotNullOrUndefined(link);\n    await waitForAria('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]');\n    await link.evaluate(node => node.remove());\n    await waitForNone('link\\xa0\"cats\"\\xa0focusable:\\xa0true[role=\"treeitem\"]', undefined, undefined, 'aria');\n  });\n});\n"]}