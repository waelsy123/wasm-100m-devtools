{"version":3,"file":"network-throttle-persist_test.js","sourceRoot":"","sources":["../../../../../../test/e2e/network/network-throttle-persist_test.ts"],"names":[],"mappings":";AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;;AAE7B,+BAA4B;AAG5B,sDAA4E;AAC5E,0EAA8D;AAC9D,sEAAmE;AAEnE,IAAA,8BAAQ,EAAC,iBAAiB,EAAE,KAAK;IAC/B,sEAAsE;IACtE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAErB,UAAU,CAAC,KAAK,IAAI,EAAE;QACpB,MAAM,IAAA,yCAAoB,EAAC,YAAY,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,YAAY,CAAC,MAAwC,EAAE,QAAgB;QACpF,aAAM,CAAC,WAAW,CAAC,MAAM,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;QAC9E,aAAM,CAAC,WAAW,CAAC,MAAM,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;IAC9G,CAAC;IAED,IAAA,wBAAE,EAAC,mCAAmC,EAAE,KAAK,IAAI,EAAE;QACjD,kDAAkD;QAClD;YACE,MAAM,MAAM,GAAG,MAAM,IAAA,mBAAO,EAAC,QAAQ,EAAE,MAAM,IAAA,uBAAW,EAAC,YAAY,CAAC,CAAC,CAAC;YACxE,MAAM,YAAY,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;YACtD,MAAM,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAC/B,MAAM,YAAY,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;SAChD;QACD,yDAAyD;QACzD,MAAM,IAAA,0BAAc,EAAC,EAAC,WAAW,EAAE,EAAC,KAAK,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;QACxD;YACE,MAAM,MAAM,GAAG,MAAM,IAAA,mBAAO,EAAC,QAAQ,EAAE,MAAM,IAAA,uBAAW,EAAC,YAAY,CAAC,CAAC,CAAC;YACxE,MAAM,YAAY,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;YAC/C,MAAM,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAC/B,MAAM,YAAY,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;SAChD;QACD,kDAAkD;QAClD,MAAM,IAAA,0BAAc,EAAC,EAAC,WAAW,EAAE,EAAC,KAAK,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;QACxD;YACE,MAAM,MAAM,GAAG,MAAM,IAAA,mBAAO,EAAC,QAAQ,EAAE,MAAM,IAAA,uBAAW,EAAC,YAAY,CAAC,CAAC,CAAC;YACxE,MAAM,YAAY,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;YAC/C,MAAM,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YACrC,MAAM,YAAY,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;SACvD;QACD,6CAA6C;QAC7C,MAAM,IAAA,0BAAc,EAAC,EAAC,WAAW,EAAE,EAAC,KAAK,EAAE,SAAS,EAAC,EAAC,CAAC,CAAC;QACxD;YACE,MAAM,MAAM,GAAG,MAAM,IAAA,mBAAO,EAAC,QAAQ,EAAE,MAAM,IAAA,uBAAW,EAAC,YAAY,CAAC,CAAC,CAAC;YACxE,MAAM,YAAY,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;SACvD;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\nimport type {ElementHandle} from 'puppeteer';\n\nimport {reloadDevTools, waitFor, waitForAria} from '../../shared/helper.js';\nimport {describe, it} from '../../shared/mocha-extensions.js';\nimport {navigateToNetworkTab} from '../helpers/network-helpers.js';\n\ndescribe('The Network Tab', async function() {\n  // These tests reload panels repeatedly, which can take a longer time.\n  this.timeout(20_000);\n\n  beforeEach(async () => {\n    await navigateToNetworkTab('empty.html');\n  });\n\n  async function assertOption(select: ElementHandle<HTMLSelectElement>, expected: string) {\n    assert.strictEqual(await select.evaluate(el => el.selectedOptions.length), 1);\n    assert.strictEqual(await select.evaluate(el => el.selectedOptions[0].getAttribute('aria-label')), expected);\n  }\n\n  it('can persist throttling conditions', async () => {\n    // Start with no throttling, select an option \"A\".\n    {\n      const select = await waitFor('select', await waitForAria('Throttling'));\n      await assertOption(select, 'Disabled: No throttling');\n      await select.select('Fast 3G');\n      await assertOption(select, 'Presets: Fast 3G');\n    }\n    // Verify persistence for \"A\", select another option \"B\".\n    await reloadDevTools({queryParams: {panel: 'network'}});\n    {\n      const select = await waitFor('select', await waitForAria('Throttling'));\n      await assertOption(select, 'Presets: Fast 3G');\n      await select.select('Slow 3G');\n      await assertOption(select, 'Presets: Slow 3G');\n    }\n    // Verify persistence for \"B\", disable throttling.\n    await reloadDevTools({queryParams: {panel: 'network'}});\n    {\n      const select = await waitFor('select', await waitForAria('Throttling'));\n      await assertOption(select, 'Presets: Slow 3G');\n      await select.select('No throttling');\n      await assertOption(select, 'Disabled: No throttling');\n    }\n    // Verify persistence of disabled throttling.\n    await reloadDevTools({queryParams: {panel: 'network'}});\n    {\n      const select = await waitFor('select', await waitForAria('Throttling'));\n      await assertOption(select, 'Disabled: No throttling');\n    }\n  });\n});\n"]}