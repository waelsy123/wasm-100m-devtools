{"version":3,"file":"performance-helpers.js","sourceRoot":"","sources":["../../../../../../test/e2e/helpers/performance-helpers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport type * as puppeteer from 'puppeteer';\n\nimport {click, goToResource, waitFor} from '../../shared/helper.js';\n\nexport const RECORD_BUTTON_SELECTOR = '[aria-label=\"Record\"]';\nexport const STOP_BUTTON_SELECTOR = '[aria-label=\"Stop\"]';\nexport const SUMMARY_TAB_SELECTOR = '[aria-label=\"Summary\"]';\nexport const BOTTOM_UP_SELECTOR = '[aria-label=\"Bottom-Up\"]';\nexport const CALL_TREE_SELECTOR = '[aria-label=\"Call Tree\"]';\nexport const ACTIVITY_COLUMN_SELECTOR = '.activity-column.disclosure';\nexport const TOTAL_TIME_SELECTOR =\n    'div:nth-child(1) > div.vbox.timeline-details-chip-body > div:nth-child(1) > div.timeline-details-view-row-value';\n\nexport async function navigateToPerformanceTab(testName?: string) {\n  if (testName) {\n    await goToResource(`performance/${testName}.html`);\n  }\n\n  // Click on the tab.\n  await click('#tab-timeline');\n\n  // Make sure the landing page is shown.\n  await waitFor('.timeline-landing-page');\n}\n\nexport async function searchForComponent(frontend: puppeteer.Page, searchEntry: string) {\n  await frontend.keyboard.down('Control');\n  await frontend.keyboard.press('KeyF');\n  await frontend.keyboard.up('Control');\n  await frontend.keyboard.type(searchEntry);\n  await frontend.keyboard.press('Enter');\n}\n\nexport async function navigateToSummaryTab() {\n  await click(SUMMARY_TAB_SELECTOR);\n}\n\nexport async function navigateToBottomUpTab() {\n  await click(BOTTOM_UP_SELECTOR);\n}\n\nexport async function navigateToCallTreeTab() {\n  await click(CALL_TREE_SELECTOR);\n}\n\nexport async function startRecording() {\n  await click(RECORD_BUTTON_SELECTOR);\n\n  // Wait for the button to turn to its stop state.\n  await waitFor(STOP_BUTTON_SELECTOR);\n}\n\nexport async function stopRecording() {\n  await click(STOP_BUTTON_SELECTOR);\n\n  // Make sure the timeline details panel appears. It's a sure way to assert\n  // that a recording is actually displayed as some of the other elements in\n  // the timeline remain in the DOM even after the recording has been cleared.\n  await waitFor('.timeline-details-chip-body');\n}\n\nexport async function getTotalTimeFromSummary(): Promise<number> {\n  const pieChartTotal = await waitFor('.pie-chart-total');\n  const totalText = await pieChartTotal.evaluate(node => node.textContent as string);\n  return parseInt(totalText, 10);\n}\n\nexport async function retrieveSelectedAndExpandedActivityItems(frontend: puppeteer.Page) {\n  const treeItems = await frontend.$$('.expanded > td.activity-column,.selected > td.activity-column');\n  const tree = [];\n  for (const item of treeItems) {\n    tree.push(await frontend.evaluate(el => el.innerText.split('\\n')[0], item));\n  }\n\n  return tree;\n}\n\nexport async function navigateToPerformanceSidebarTab(tabName: string) {\n  await click(`[aria-label=\"${tabName}\"]`);\n}\n\nexport async function waitForSourceLinkAndFollowIt() {\n  const link = await waitFor('.devtools-link');\n  await click(link);\n  await waitFor('.panel[aria-label=\"sources\"]');\n}\n\nexport async function clickOnFunctionLink() {\n  const link = await waitFor('.timeline-details.devtools-link');\n  await click(link);\n}\n"]}