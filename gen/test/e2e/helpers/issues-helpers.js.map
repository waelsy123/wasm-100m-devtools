{"version":3,"file":"issues-helpers.js","sourceRoot":"","sources":["../../../../../../test/e2e/helpers/issues-helpers.ts"],"names":[],"mappings":";AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;;;AAE7B,+BAA4B;AAG5B,sDAAqH;AACrH,+DAA4D;AAE/C,QAAA,QAAQ,GAAG,qCAAqC,CAAC;AACjD,QAAA,IAAI,GAAG,aAAa,CAAC;AACrB,QAAA,aAAa,GAAG,wBAAwB,CAAC;AACzC,QAAA,iBAAiB,GAAG,uCAAuC,CAAC;AAC5D,QAAA,aAAa,GAAG,mCAAmC,CAAC;AACpD,QAAA,KAAK,GAAG,2BAA2B,CAAC;AACpC,QAAA,WAAW,GAAG,eAAe,CAAC;AAC9B,QAAA,qBAAqB,GAAG,kCAAkC,CAAC;AAC3D,QAAA,mBAAmB,GAAG,sBAAsB,CAAC;AAC7C,QAAA,uBAAuB,GAAG,+BAA+B,CAAC;AAC1D,QAAA,YAAY,GAAG,kCAAkC,CAAC;AAClD,QAAA,cAAc,GAAG,mCAAmC,CAAC;AACrD,QAAA,kBAAkB,GAAG,uCAAuC,CAAC;AAC7D,QAAA,eAAe,GAAG,0BAA0B,CAAC;AAC7C,QAAA,gBAAgB,GAAG,2BAA2B,CAAC;AAC/C,QAAA,eAAe,GAAG,uBAAuB,CAAC;AAC1C,QAAA,iBAAiB,GAAG,yBAAyB,CAAC;AAC9C,QAAA,iBAAiB,GAAG,2BAA2B,CAAC;AAEtD,KAAK,UAAU,iBAAiB;IACrC,MAAM,IAAI,GAAG,MAAM,IAAA,mBAAO,EAAC,wBAAgB,CAAC,CAAC;IAC7C,OAAO,IAAI,CAAC;AACd,CAAC;AAHD,8CAGC;AAEM,KAAK,UAAU,mBAAmB;IACvC,MAAM,IAAA,2CAAqB,EAAC,QAAQ,CAAC,CAAC;AACxC,CAAC;AAFD,kDAEC;AAEM,KAAK,UAAU,qBAAqB;IACzC,MAAM,GAAG,GAAG,MAAM,IAAA,mBAAO,EAAC,yBAAiB,CAAC,CAAC;IAC7C,OAAO,GAAG,CAAC;AACb,CAAC;AAHD,sDAGC;AAEM,KAAK,UAAU,qBAAqB;IACzC,MAAM,QAAQ,GAAG,MAAM,IAAA,mBAAO,EAAC,gBAAgB,uBAAe,IAAI,CAAC,CAAC;IACpE,IAAI,QAAQ,EAAE;QACZ,OAAO,QAAQ,CAAC;KACjB;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAND,sDAMC;AAEM,KAAK,UAAU,uBAAuB;IAC3C,OAAO,MAAM,IAAA,mBAAO,EAAC,gBAAgB,yBAAiB,IAAI,CAAC,CAAC;AAC9D,CAAC;AAFD,0DAEC;AAEM,KAAK,UAAU,kBAAkB;IACtC,OAAO,MAAM,IAAA,mBAAO,EAAC,gBAAgB,CAAC,CAAC;AACzC,CAAC;AAFD,gDAEC;AAEM,KAAK,UAAU,sBAAsB;IAC1C,OAAO,MAAM,IAAA,mBAAO,EAAC,qBAAqB,CAAC,CAAC;AAC9C,CAAC;AAFD,wDAEC;AAEM,KAAK,UAAU,kBAAkB,CAAC,YAAoB;IAC3D,MAAM,mBAAmB,GAAG,MAAM,IAAA,mBAAO,EAAC,qBAAa,CAAC,CAAC;IACzD,MAAM,oBAAoB,GAAG,MAAM,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC1F,aAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,YAAY,CAAC,CAAC;AACzD,CAAC;AAJD,gDAIC;AAEM,KAAK,UAAU,gBAAgB,CAAC,YAAoB;IACzD,MAAM,mBAAmB,GAAG,MAAM,IAAA,mBAAO,EAAC,mBAAW,CAAC,CAAC;IACvD,MAAM,oBAAoB,GAAG,MAAM,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC1F,aAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,YAAY,CAAC,CAAC;AACzD,CAAC;AAJD,4CAIC;AAED,KAAK,UAAU,sBAAsB,CAAC,mBAAqD;IAEzF,MAAM,MAAM,GACR,MAAM,mBAAmB,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,CAAyC,CAAC;IAC7G,IAAI,MAAM,EAAE;QACV,MAAM,eAAe,GAAG,MAAM,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC7E,aAAM,CAAC,OAAO,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;QAC1C,MAAM,KAAK,GAAG,MAAM,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC9E,IAAI,KAAK,EAAE;YACT,OAAO,KAA6C,CAAC;SACtD;KACF;IACD,OAAO,SAAS,CAAC;AACnB,CAAC;AAED,8CAA8C;AACvC,KAAK,UAAU,eAAe,CAAC,YAAoB;IACxD,MAAM,mBAAmB,GAAG,MAAM,IAAA,mBAAO,EAAC,mBAAW,CAAC,CAAC;IACvD,MAAM,oBAAoB,GAAG,MAAM,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC1F,aAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,YAAY,CAAC,CAAC;IACvD,OAAO,sBAAsB,CAAC,mBAAmB,CAAC,CAAC;AACrD,CAAC;AALD,0CAKC;AAED,2CAA2C;AACpC,KAAK,UAAU,gCAAgC,CAAC,YAAoB;IAEzE,MAAM,mBAAmB,GAAG,MAAM,IAAA,2BAAe,EAAC,KAAK,IAAI,EAAE;QAC3D,MAAM,aAAa,GAAG,MAAM,IAAA,cAAE,EAAC,mBAAW,CAAC,CAAC;QAC5C,KAAK,MAAM,YAAY,IAAI,aAAa,EAAE;YACxC,MAAM,OAAO,GAAG,MAAM,YAAY,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;YACtF,IAAI,OAAO,KAAK,YAAY,EAAE;gBAC5B,OAAO,YAAY,CAAC;aACrB;SACF;QACD,OAAO,SAAS,CAAC;IACnB,CAAC,CAAC,CAAC;IACH,MAAM,IAAA,iBAAK,EAAC,mBAAmB,CAAC,CAAC;IACjC,MAAM,IAAA,mBAAO,EAAC,UAAU,CAAC,CAAC;IAC1B,OAAO,sBAAsB,CAAC,mBAAmB,CAAC,CAAC;AACrD,CAAC;AAfD,4EAeC;AAEM,KAAK,UAAU,qBAAqB,CAAC,YAAoB;IAE9D,MAAM,mBAAmB,GAAG,MAAM,IAAA,mBAAO,EAAC,mBAAW,CAAC,CAAC;IACvD,MAAM,oBAAoB,GAAG,MAAM,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC1F,aAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,YAAY,CAAC,CAAC;IACvD,MAAM,MAAM,GACR,MAAM,mBAAmB,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,CAAyC,CAAC;IAC7G,IAAI,MAAM,EAAE;QACV,OAAO,MAAM,CAAC;KACf;IACD,OAAO,SAAS,CAAC;AACnB,CAAC;AAXD,sDAWC;AAEM,KAAK,UAAU,YAAY,CAAC,MAA+B;IAChE,MAAM,WAAW,GAAG,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,sBAAc,CAAC,CAAC,CAAC,0BAAkB,CAAC;IAC/E,MAAM,mBAAmB,GAAG,MAAM,IAAA,mBAAO,EAAC,WAAW,CAAC,CAAC;IACvD,MAAM,oBAAoB,GAAG,MAAM,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC1F,aAAM,CAAC,WAAW,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;AACnD,CAAC;AALD,oCAKC;AAEM,KAAK,UAAU,cAAc;IAClC,MAAM,eAAe,GAAG,MAAM,IAAA,mBAAO,EAAC,gBAAQ,CAAC,CAAC;IAChD,MAAM,kBAAkB,GAAG,MAAM,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IAEvG,IAAI,CAAC,kBAAkB,EAAE;QACvB,MAAM,IAAA,iBAAK,EAAC,gBAAQ,CAAC,CAAC;KACvB;IAED,MAAM,IAAA,mBAAO,EAAC,aAAK,CAAC,CAAC;AACvB,CAAC;AATD,wCASC;AAEM,KAAK,UAAU,UAAU,CAAC,aAAqB;IACpD,MAAM,WAAW,GAAG,MAAM,IAAA,mBAAO,EAAC,GAAG,YAAI,GAAG,aAAa,EAAE,CAAC,CAAC;IAC7D,MAAM,cAAc,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IAC/F,IAAI,CAAC,cAAc,EAAE;QACnB,MAAM,WAAW,CAAC,KAAK,EAAE,CAAC;KAC3B;IACD,MAAM,IAAA,mBAAO,EAAC,aAAK,CAAC,CAAC;AACvB,CAAC;AAPD,gCAOC;AAEM,KAAK,UAAU,WAAW;IAC/B,IAAI,MAAM,yBAAyB,EAAE,EAAE;QACrC,MAAM,cAAc,EAAE,CAAC;KACxB;IAED,MAAM,IAAA,mBAAO,EAAC,aAAK,CAAC,CAAC;IACrB,MAAM,IAAA,iBAAK,EAAC,aAAK,CAAC,CAAC;IACnB,MAAM,IAAA,mBAAO,EAAC,UAAU,CAAC,CAAC;AAC5B,CAAC;AARD,kCAQC;AAOM,KAAK,UAAU,mBAAmB,CACrC,YAAoB,EAAE,YAAyD,EAC/E,SAAkB;IACpB,OAAO,MAAM,IAAA,2BAAe,EAAC,KAAK,IAAI,EAAE;QACtC,MAAM,QAAQ,GAAG,MAAM,IAAA,cAAE,EAAC,SAAS,IAAI,uBAAe,EAAE,YAAY,CAAC,CAAC;QACtE,KAAK,MAAM,EAAE,IAAI,QAAQ,EAAE;YACzB,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;YACrD,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;gBACvC,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,aAAa,IAAI,EAAE,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;gBAChG,OAAO,EAAC,KAAK,EAAE,EAAE,EAAE,OAAO,EAAE,OAA2C,EAAC,CAAC;aAC1E;SACF;QACD,OAAO,SAAS,CAAC;IACnB,CAAC,CAAC,CAAC;AACL,CAAC;AAdD,kDAcC;AAEM,KAAK,UAAU,+BAA+B,CAAC,OAA6B;IACjF,MAAM,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;QAChC,EAAE,CAAC,cAAc,EAAE,CAAC;IACtB,CAAC,CAAC,CAAC;IACH,MAAM,UAAU,GAAG,MAAM,IAAA,oBAAQ,EAAC,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAC/D,IAAI,CAAC,UAAU,EAAE;QACf,MAAM,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;KAC7B;IACD,MAAM,IAAA,wBAAY,EAAC,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;AAClD,CAAC;AATD,0EASC;AAED,KAAK,UAAU,+BAA+B,CAAC,sBAAwD;IAErG,MAAM,KAAK,GAAG,MAAM,sBAAsB,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC;IACxE,IAAI,KAAK,EAAE;QACT,OAAO,MAAM,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAClC,MAAM,IAAI,GAAG,EAAE,CAAC;YAChB,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,UAAU,EAAE;gBACvC,MAAM,GAAG,GAAG,EAAE,CAAC;gBACf,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,UAAU,EAAE;oBACtC,MAAM,eAAe,GAAG,IAAI,YAAY,WAAW,IAAI,IAAI,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;oBACxG,IAAI,eAAe,EAAE;wBACnB,MAAM,KAAK,GAAG,eAAe,CAAC,UAAU,EAAE,aAAa,CAAC,8BAA8B,CAAC,CAAC;wBACxF,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,WAAW,IAAI,EAAE,CAAC,CAAC;qBACpC;yBAAM;wBACL,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;qBAClC;iBACF;gBACD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAChB;YACD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;KACJ;IACD,OAAO,SAAS,CAAC;AACnB,CAAC;AAEM,KAAK,UAAU,+BAA+B,CACjD,sBAAwD,EACxD,SAAkD;IACpD,OAAO,MAAM,IAAA,2BAAe,EAAC,KAAK,IAAI,EAAE;QACtC,MAAM,KAAK,GAAG,MAAM,+BAA+B,CAAC,sBAAsB,CAAC,CAAC;QAC5E,IAAI,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE;YACvC,OAAO,SAAS,CAAC;SAClB;QACD,OAAO,KAAK,CAAC;IACf,CAAC,CAAC,CAAC;AACL,CAAC;AAVD,0EAUC;AAED,SAAgB,uCAAuC,CACnD,sBAAwD,EAAE,QAA6B;IACzF,OAAO,+BAA+B,CAClC,sBAAsB,EAAE,KAAK,CAAC,EAAE,CAAC,IAAA,4BAAgB,EAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;AACtG,CAAC;AAJD,0FAIC;AAEM,KAAK,UAAU,yBAAyB;IAC7C,MAAM,gBAAgB,GAAG,MAAM,IAAA,mBAAO,EAAC,yBAAiB,CAAC,CAAC;IAC1D,OAAO,MAAM,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAE,IAAyB,CAAC,OAAO,CAAC,CAAC;AACrF,CAAC;AAHD,8DAGC;AAEM,KAAK,UAAU,qBAAqB;IACzC,MAAM,gBAAgB,GAAG,MAAM,IAAA,mBAAO,EAAC,qBAAa,CAAC,CAAC;IACtD,OAAO,MAAM,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAE,IAAyB,CAAC,OAAO,CAAC,CAAC;AACrF,CAAC;AAHD,sDAGC;AAEM,KAAK,UAAU,yBAAyB;IAC7C,MAAM,UAAU,GAAG,MAAM,IAAA,mBAAO,EAAC,2BAAmB,CAAC,CAAC;IACtD,MAAM,UAAU,CAAC,KAAK,EAAE,CAAC;AAC3B,CAAC;AAHD,8DAGC;AAEM,KAAK,UAAU,2BAA2B;IAC/C,MAAM,WAAW,GAAG,MAAM,IAAA,mBAAO,EAAC,oBAAY,CAAC,CAAC;IAChD,MAAM,WAAW,CAAC,KAAK,EAAE,CAAC;AAC5B,CAAC;AAHD,kEAGC;AAEM,KAAK,UAAU,qBAAqB;IACzC,MAAM,UAAU,GAAG,MAAM,yBAAyB,EAAE,CAAC;IACrD,MAAM,gBAAgB,GAAG,MAAM,IAAA,mBAAO,EAAC,yBAAiB,CAAC,CAAC;IAE1D,oEAAoE;IACpE,MAAM,gBAAgB,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAE,QAA6B,CAAC,KAAK,EAAE,CAAC,CAAC;IAEpF,IAAI,UAAU,EAAE;QACd,MAAM,IAAA,mBAAO,EAAC,aAAK,CAAC,CAAC;KACtB;SAAM;QACL,MAAM,IAAA,mBAAO,EAAC,gBAAQ,CAAC,CAAC;KACzB;AACH,CAAC;AAZD,sDAYC;AAEM,KAAK,UAAU,iBAAiB;IACrC,MAAM,UAAU,GAAG,MAAM,qBAAqB,EAAE,CAAC;IACjD,MAAM,YAAY,GAAG,MAAM,IAAA,mBAAO,EAAC,qBAAa,CAAC,CAAC;IAElD,oEAAoE;IACpE,MAAM,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAE,QAA6B,CAAC,KAAK,EAAE,CAAC,CAAC;IAEhF,IAAI,UAAU,EAAE;QACd,MAAM,IAAA,mBAAO,EAAC,aAAK,CAAC,CAAC;KACtB;SAAM;QACL,MAAM,IAAA,mBAAO,EAAC,YAAI,CAAC,CAAC;KACrB;AACH,CAAC;AAZD,8CAYC","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {assert} from 'chai';\nimport type * as puppeteer from 'puppeteer';\n\nimport {$$, click, hasClass, matchStringTable, waitFor, waitForClass, waitForFunction} from '../../shared/helper.js';\nimport {openPanelViaMoreTools} from './settings-helpers.js';\n\nexport const CATEGORY = '.issue-category:not(.hidden-issues)';\nexport const KIND = '.issue-kind';\nexport const CATEGORY_NAME = '.issue-category .title';\nexport const CATEGORY_CHECKBOX = 'input[aria-label=\"Group by category\"]';\nexport const KIND_CHECKBOX = 'input[aria-label=\"Group by kind\"]';\nexport const ISSUE = '.issue:not(.hidden-issue)';\nexport const ISSUE_TITLE = '.issue .title';\nexport const AFFECTED_ELEMENT_ICON = '.affected-resource-csp-info-node';\nexport const ELEMENT_REVEAL_ICON = '.element-reveal-icon';\nexport const ELEMENTS_PANEL_SELECTOR = '.panel[aria-label=\"elements\"]';\nexport const SOURCES_LINK = '.affected-source-location > span';\nexport const BLOCKED_STATUS = '.affected-resource-blocked-status';\nexport const REPORT_ONLY_STATUS = '.affected-resource-report-only-status';\nexport const RESOURCES_LABEL = '.affected-resource-label';\nexport const HIDE_ISSUES_MENU = 'devtools-hide-issues-menu';\nexport const HIDE_THIS_ISSUE = 'Hide issues like this';\nexport const UNHIDE_THIS_ISSUE = 'Unhide issues like this';\nexport const UNHIDE_ALL_ISSUES = '.unhide-all-issues-button';\n\nexport async function getHideIssuesMenu() {\n  const menu = await waitFor(HIDE_ISSUES_MENU);\n  return menu;\n}\n\nexport async function navigateToIssuesTab() {\n  await openPanelViaMoreTools('Issues');\n}\n\nexport async function getUnhideAllIssuesBtn() {\n  const btn = await waitFor(UNHIDE_ALL_ISSUES);\n  return btn;\n}\n\nexport async function getHideIssuesMenuItem(): Promise<puppeteer.ElementHandle<HTMLElement>|null> {\n  const menuItem = await waitFor(`[aria-label=\"${HIDE_THIS_ISSUE}\"]`);\n  if (menuItem) {\n    return menuItem;\n  }\n  return null;\n}\n\nexport async function getUnhideIssuesMenuItem(): Promise<puppeteer.ElementHandle<HTMLElement>|null> {\n  return await waitFor(`[aria-label=\"${UNHIDE_THIS_ISSUE}\"]`);\n}\n\nexport async function getHiddenIssuesRow(): Promise<puppeteer.ElementHandle<HTMLElement>|null> {\n  return await waitFor('.hidden-issues');\n}\n\nexport async function getHiddenIssuesRowBody(): Promise<puppeteer.ElementHandle<HTMLElement>|null> {\n  return await waitFor('.hidden-issues-body');\n}\n\nexport async function assertCategoryName(categoryName: string) {\n  const categoryNameElement = await waitFor(CATEGORY_NAME);\n  const selectedCategoryName = await categoryNameElement.evaluate(node => node.textContent);\n  assert.strictEqual(selectedCategoryName, categoryName);\n}\n\nexport async function assertIssueTitle(issueMessage: string) {\n  const issueMessageElement = await waitFor(ISSUE_TITLE);\n  const selectedIssueMessage = await issueMessageElement.evaluate(node => node.textContent);\n  assert.strictEqual(selectedIssueMessage, issueMessage);\n}\n\nasync function getIssueByTitleElement(issueMessageElement: puppeteer.ElementHandle<Element>):\n    Promise<puppeteer.ElementHandle<HTMLElement>|undefined> {\n  const header =\n      await issueMessageElement.evaluateHandle(el => el.parentElement) as puppeteer.ElementHandle<HTMLElement>;\n  if (header) {\n    const headerClassList = await header.evaluate(el => el.classList.toString());\n    assert.include(headerClassList, 'header');\n    const issue = await header.evaluateHandle(el => el.parentElement.nextSibling);\n    if (issue) {\n      return issue as puppeteer.ElementHandle<HTMLElement>;\n    }\n  }\n  return undefined;\n}\n\n// Only works if there is just a single issue.\nexport async function getIssueByTitle(issueMessage: string): Promise<puppeteer.ElementHandle<HTMLElement>|undefined> {\n  const issueMessageElement = await waitFor(ISSUE_TITLE);\n  const selectedIssueMessage = await issueMessageElement.evaluate(node => node.textContent);\n  assert.strictEqual(selectedIssueMessage, issueMessage);\n  return getIssueByTitleElement(issueMessageElement);\n}\n\n// Works also if there are multiple issues.\nexport async function getAndExpandSpecificIssueByTitle(issueMessage: string):\n    Promise<puppeteer.ElementHandle<HTMLElement>|undefined> {\n  const issueMessageElement = await waitForFunction(async () => {\n    const issueElements = await $$(ISSUE_TITLE);\n    for (const issueElement of issueElements) {\n      const message = await issueElement.evaluate(issueElement => issueElement.textContent);\n      if (message === issueMessage) {\n        return issueElement;\n      }\n    }\n    return undefined;\n  });\n  await click(issueMessageElement);\n  await waitFor('.message');\n  return getIssueByTitleElement(issueMessageElement);\n}\n\nexport async function getIssueHeaderByTitle(issueMessage: string):\n    Promise<puppeteer.ElementHandle<HTMLElement>|undefined> {\n  const issueMessageElement = await waitFor(ISSUE_TITLE);\n  const selectedIssueMessage = await issueMessageElement.evaluate(node => node.textContent);\n  assert.strictEqual(selectedIssueMessage, issueMessage);\n  const header =\n      await issueMessageElement.evaluateHandle(el => el.parentElement) as puppeteer.ElementHandle<HTMLElement>;\n  if (header) {\n    return header;\n  }\n  return undefined;\n}\n\nexport async function assertStatus(status: 'blocked'|'report-only') {\n  const classStatus = status === 'blocked' ? BLOCKED_STATUS : REPORT_ONLY_STATUS;\n  const issueMessageElement = await waitFor(classStatus);\n  const selectedIssueMessage = await issueMessageElement.evaluate(node => node.textContent);\n  assert.strictEqual(selectedIssueMessage, status);\n}\n\nexport async function expandCategory() {\n  const categoryElement = await waitFor(CATEGORY);\n  const isCategoryExpanded = await categoryElement.evaluate(node => node.classList.contains('expanded'));\n\n  if (!isCategoryExpanded) {\n    await click(CATEGORY);\n  }\n\n  await waitFor(ISSUE);\n}\n\nexport async function expandKind(classSelector: string) {\n  const kindElement = await waitFor(`${KIND}${classSelector}`);\n  const isKindExpanded = await kindElement.evaluate(node => node.classList.contains('expanded'));\n  if (!isKindExpanded) {\n    await kindElement.click();\n  }\n  await waitFor(ISSUE);\n}\n\nexport async function expandIssue() {\n  if (await getGroupByCategoryChecked()) {\n    await expandCategory();\n  }\n\n  await waitFor(ISSUE);\n  await click(ISSUE);\n  await waitFor('.message');\n}\n\ninterface IssueResourceSection {\n  label: puppeteer.ElementHandle<Element>;\n  content: puppeteer.ElementHandle<Element>;\n}\n\nexport async function getResourcesElement(\n    resourceName: string, issueElement?: puppeteer.ElementHandle<Element>|undefined,\n    className?: string): Promise<IssueResourceSection> {\n  return await waitForFunction(async () => {\n    const elements = await $$(className ?? RESOURCES_LABEL, issueElement);\n    for (const el of elements) {\n      const text = await el.evaluate(el => el.textContent);\n      if (text && text.includes(resourceName)) {\n        const content = await el.evaluateHandle(el => el.parentElement && el.parentElement.nextSibling);\n        return {label: el, content: content as puppeteer.ElementHandle<Element>};\n      }\n    }\n    return undefined;\n  });\n}\n\nexport async function ensureResourceSectionIsExpanded(section: IssueResourceSection) {\n  await section.label.evaluate(el => {\n    el.scrollIntoView();\n  });\n  const isExpanded = await hasClass(section.content, 'expanded');\n  if (!isExpanded) {\n    await section.label.click();\n  }\n  await waitForClass(section.content, 'expanded');\n}\n\nasync function extractTableFromResourceSection(resourceContentElement: puppeteer.ElementHandle<Element>):\n    Promise<string[][]|undefined> {\n  const table = await resourceContentElement.$('.affected-resource-list');\n  if (table) {\n    return await table.evaluate(table => {\n      const rows = [];\n      for (const tableRow of table.childNodes) {\n        const row = [];\n        for (const cell of tableRow.childNodes) {\n          const requestLinkIcon = cell instanceof HTMLElement && cell.querySelector('devtools-request-link-icon');\n          if (requestLinkIcon) {\n            const label = requestLinkIcon.shadowRoot?.querySelector('[aria-label=\"Shortened URL\"]');\n            row.push(label?.textContent || '');\n          } else {\n            row.push(cell.textContent || '');\n          }\n        }\n        rows.push(row);\n      }\n      return rows;\n    });\n  }\n  return undefined;\n}\n\nexport async function waitForTableFromResourceSection(\n    resourceContentElement: puppeteer.ElementHandle<Element>,\n    predicate: (table: string[][]) => true | undefined): Promise<string[][]> {\n  return await waitForFunction(async () => {\n    const table = await extractTableFromResourceSection(resourceContentElement);\n    if (!table || predicate(table) !== true) {\n      return undefined;\n    }\n    return table;\n  });\n}\n\nexport function waitForTableFromResourceSectionContents(\n    resourceContentElement: puppeteer.ElementHandle<Element>, expected: (string|RegExp)[][]): Promise<string[][]> {\n  return waitForTableFromResourceSection(\n      resourceContentElement, table => matchStringTable(table, expected) === true ? true : undefined);\n}\n\nexport async function getGroupByCategoryChecked() {\n  const categoryCheckbox = await waitFor(CATEGORY_CHECKBOX);\n  return await categoryCheckbox.evaluate(node => (node as HTMLInputElement).checked);\n}\n\nexport async function getGroupByKindChecked() {\n  const categoryCheckbox = await waitFor(KIND_CHECKBOX);\n  return await categoryCheckbox.evaluate(node => (node as HTMLInputElement).checked);\n}\n\nexport async function revealNodeInElementsPanel() {\n  const revealIcon = await waitFor(ELEMENT_REVEAL_ICON);\n  await revealIcon.click();\n}\n\nexport async function revealViolatingSourcesLines() {\n  const sourcesLink = await waitFor(SOURCES_LINK);\n  await sourcesLink.click();\n}\n\nexport async function toggleGroupByCategory() {\n  const wasChecked = await getGroupByCategoryChecked();\n  const categoryCheckbox = await waitFor(CATEGORY_CHECKBOX);\n\n  // Invoke `click()` directly on the checkbox to toggle while hidden.\n  await categoryCheckbox.evaluate(checkbox => (checkbox as HTMLInputElement).click());\n\n  if (wasChecked) {\n    await waitFor(ISSUE);\n  } else {\n    await waitFor(CATEGORY);\n  }\n}\n\nexport async function toggleGroupByKind() {\n  const wasChecked = await getGroupByKindChecked();\n  const kindCheckbox = await waitFor(KIND_CHECKBOX);\n\n  // Invoke `click()` directly on the checkbox to toggle while hidden.\n  await kindCheckbox.evaluate(checkbox => (checkbox as HTMLInputElement).click());\n\n  if (wasChecked) {\n    await waitFor(ISSUE);\n  } else {\n    await waitFor(KIND);\n  }\n}\n"]}