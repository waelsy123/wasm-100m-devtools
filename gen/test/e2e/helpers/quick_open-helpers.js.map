{"version":3,"file":"quick_open-helpers.js","sourceRoot":"","sources":["../../../../../../test/e2e/helpers/quick_open-helpers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {$$, click, getBrowserAndPages, platform, typeText, waitFor} from '../../shared/helper.js';\n\nexport const QUICK_OPEN_SELECTOR = '[aria-label=\"Quick open\"]';\nconst QUICK_OPEN_ITEMS_SELECTOR = '.filtered-list-widget-item-wrapper';\nconst QUICK_OPEN_ITEM_TITLE_SELECTOR = '.filtered-list-widget-title';\n\nconst QUICK_OPEN_SELECTED_ITEM_SELECTOR = `${QUICK_OPEN_ITEMS_SELECTOR}.selected`;\n\nexport const openCommandMenu = async () => {\n  const {frontend} = getBrowserAndPages();\n\n  switch (platform) {\n    case 'mac':\n      await frontend.keyboard.down('Meta');\n      await frontend.keyboard.down('Shift');\n      break;\n\n    case 'linux':\n    case 'win32':\n      await frontend.keyboard.down('Control');\n      await frontend.keyboard.down('Shift');\n      break;\n  }\n\n  await frontend.keyboard.press('P');\n\n  switch (platform) {\n    case 'mac':\n      await frontend.keyboard.up('Meta');\n      await frontend.keyboard.up('Shift');\n      break;\n\n    case 'linux':\n    case 'win32':\n      await frontend.keyboard.up('Control');\n      await frontend.keyboard.up('Shift');\n      break;\n  }\n\n  await waitFor(QUICK_OPEN_SELECTOR);\n};\n\nexport const openFileQuickOpen = async () => {\n  const {frontend} = getBrowserAndPages();\n  const modifierKey = platform === 'mac' ? 'Meta' : 'Control';\n  await frontend.keyboard.down(modifierKey);\n  await frontend.keyboard.press('P');\n  await frontend.keyboard.up(modifierKey);\n  await waitFor(QUICK_OPEN_SELECTOR);\n};\n\nexport const showSnippetsAutocompletion = async () => {\n  const {frontend} = getBrowserAndPages();\n\n  // Clear the `>` character, as snippets use a `!` instead\n  await frontend.keyboard.press('Backspace');\n\n  await typeText('!');\n};\n\nexport async function getAvailableSnippets() {\n  const quickOpenElement = await waitFor(QUICK_OPEN_SELECTOR);\n  const snippetsDOMElements = await $$(QUICK_OPEN_ITEMS_SELECTOR, quickOpenElement);\n  const snippets = await Promise.all(snippetsDOMElements.map(elem => elem.evaluate(elem => elem.textContent)));\n  return snippets;\n}\n\nexport async function getMenuItemAtPosition(position: number) {\n  const quickOpenElement = await waitFor(QUICK_OPEN_SELECTOR);\n  await waitFor(QUICK_OPEN_ITEM_TITLE_SELECTOR);\n  const itemsHandles = await $$(QUICK_OPEN_ITEMS_SELECTOR, quickOpenElement);\n  const item = itemsHandles[position];\n  if (!item) {\n    assert.fail(`Quick open: could not find item at position: ${position}.`);\n  }\n  return item;\n}\n\nexport async function getMenuItemTitleAtPosition(position: number) {\n  const quickOpenElement = await waitFor(QUICK_OPEN_SELECTOR);\n  await waitFor(QUICK_OPEN_ITEM_TITLE_SELECTOR);\n  const itemsHandles = await $$(QUICK_OPEN_ITEM_TITLE_SELECTOR, quickOpenElement);\n  const item = itemsHandles[position];\n  if (!item) {\n    assert.fail(`Quick open: could not find item at position: ${position}.`);\n  }\n  const title = await item.evaluate(elem => elem.textContent);\n  return title;\n}\n\nexport const closeDrawer = async () => {\n  const closeButtonSelector = '[aria-label=\"Close drawer\"]';\n  await waitFor(closeButtonSelector);\n  await click(closeButtonSelector);\n};\n\nexport const getSelectedItemText = async () => {\n  const quickOpenElement = await waitFor(QUICK_OPEN_SELECTOR);\n  const selectedRow = await waitFor(QUICK_OPEN_SELECTED_ITEM_SELECTOR, quickOpenElement);\n  const textContent = await selectedRow.getProperty('textContent');\n  if (!textContent) {\n    assert.fail('Quick open: could not get selected item textContent');\n  }\n  return await textContent.jsonValue<string>();\n};\n"]}